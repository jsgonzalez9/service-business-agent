{"version":3,"sources":["../../../../components/settings-form.tsx"],"sourcesContent":["\"use client\"\n\nimport { useState } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\"\nimport type { AgentConfig } from \"@/lib/types\"\n\ninterface SettingsFormProps {\n  initialConfig: AgentConfig | null\n}\n\nexport function SettingsForm({ initialConfig }: SettingsFormProps) {\n  const [saving, setSaving] = useState(false)\n  const [config, setConfig] = useState({\n    company_name: initialConfig?.company_name || \"CashBuyer Properties\",\n    wholesaling_fee: initialConfig?.wholesaling_fee?.toString() || \"10000\",\n    arv_multiplier: initialConfig?.arv_multiplier?.toString() || \"0.70\",\n    follow_up_hours: initialConfig?.follow_up_hours?.toString() || \"24\",\n    max_follow_ups: initialConfig?.max_follow_ups?.toString() || \"3\",\n    followup_backoff_minutes: (initialConfig as any)?.followup_backoff_minutes?.toString() || \"15\",\n    followup_max_attempts: (initialConfig as any)?.followup_max_attempts?.toString() || \"3\",\n    llm_cache_enabled: (initialConfig as any)?.llm_cache_enabled !== false,\n    llm_cache_confidence_floor: String((initialConfig as any)?.llm_cache_confidence_floor ?? 0.85),\n    llm_cache_ttl_faq_days: String((initialConfig as any)?.llm_cache_ttl_faq_days ?? 30),\n    llm_cache_ttl_objection_days: String((initialConfig as any)?.llm_cache_ttl_objection_days ?? 14),\n  })\n  const [health, setHealth] = useState<Record<string, number>>({})\n  const [loadingHealth, setLoadingHealth] = useState(false)\n  const [marketOverrides, setMarketOverrides] = useState<Record<string, any>>((initialConfig as any)?.llm_cache_market_overrides || {})\n  const [marketCode, setMarketCode] = useState(\"\")\n  const [marketFloor, setMarketFloor] = useState(String(0.85))\n  const [marketTtlFaq, setMarketTtlFaq] = useState(String(30))\n  const [marketTtlObj, setMarketTtlObj] = useState(String(14))\n  const [cacheEntries, setCacheEntries] = useState<any[]>([])\n\n  async function loadHealth() {\n    setLoadingHealth(true)\n    try {\n      const resp = await fetch(\"/api/sms/health\")\n      const data = await resp.json()\n      if (data.success) setHealth(data.perNumber || {})\n    } catch {}\n    setLoadingHealth(false)\n  }\n\n  async function handleSave() {\n    setSaving(true)\n    try {\n      const response = await fetch(\"/api/settings\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({\n          company_name: config.company_name,\n          wholesaling_fee: Number.parseFloat(config.wholesaling_fee),\n          arv_multiplier: Number.parseFloat(config.arv_multiplier),\n          follow_up_hours: Number.parseInt(config.follow_up_hours),\n          max_follow_ups: Number.parseInt(config.max_follow_ups),\n          followup_backoff_minutes: Number.parseInt(config.followup_backoff_minutes),\n          followup_max_attempts: Number.parseInt(config.followup_max_attempts),\n          llm_cache_enabled: !!(config as any).llm_cache_enabled,\n          llm_cache_confidence_floor: Number.parseFloat((config as any).llm_cache_confidence_floor),\n          llm_cache_ttl_faq_days: Number.parseInt((config as any).llm_cache_ttl_faq_days),\n          llm_cache_ttl_objection_days: Number.parseInt((config as any).llm_cache_ttl_objection_days),\n          llm_cache_market_overrides: marketOverrides,\n          auto_dispo_eval_enabled: !!(config as any).auto_dispo_eval_enabled,\n          auto_renegotiate_days_threshold: Number.parseInt((config as any).auto_renegotiate_days_threshold ?? 5),\n          auto_cancel_days_threshold: Number.parseInt((config as any).auto_cancel_days_threshold ?? 10),\n          auto_dispo_require_human_confirm: !!(config as any).auto_dispo_require_human_confirm,\n        }),\n      })\n      const data = await response.json()\n      if (data.success) {\n        alert(\"Settings saved!\")\n      } else {\n        alert(data.error || \"Failed to save\")\n      }\n    } catch (error) {\n      console.error(\"Error saving settings:\", error)\n      alert(\"Failed to save settings\")\n    }\n    setSaving(false)\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Card>\n        <CardHeader>\n          <CardTitle>Company Information</CardTitle>\n          <CardDescription>Configure your company name used in SMS messages</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"company_name\">Company Name</Label>\n            <Input\n              id=\"company_name\"\n              value={config.company_name}\n              onChange={(e) => setConfig((prev) => ({ ...prev, company_name: e.target.value }))}\n              placeholder=\"Your Company Name\"\n            />\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>LLM Cache</CardTitle>\n          <CardDescription>Enable or disable embedding-based cache for FAQs/objections</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center gap-3\">\n            <Label htmlFor=\"llm_cache_enabled\">Enable Cache</Label>\n            <input\n              id=\"llm_cache_enabled\"\n              type=\"checkbox\"\n              checked={!!config.llm_cache_enabled}\n              onChange={(e) => setConfig((prev: any) => ({ ...prev, llm_cache_enabled: e.target.checked }))}\n            />\n          </div>\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-3\">\n            <div>\n              <Label htmlFor=\"llm_cache_confidence_floor\">Confidence Floor</Label>\n              <Input\n                id=\"llm_cache_confidence_floor\"\n                type=\"number\"\n                step=\"0.01\"\n                value={config.llm_cache_confidence_floor}\n                onChange={(e) => setConfig((prev: any) => ({ ...prev, llm_cache_confidence_floor: e.target.value }))}\n                placeholder=\"0.85\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"llm_cache_ttl_faq_days\">FAQ TTL (days)</Label>\n              <Input\n                id=\"llm_cache_ttl_faq_days\"\n                type=\"number\"\n                value={config.llm_cache_ttl_faq_days}\n                onChange={(e) => setConfig((prev: any) => ({ ...prev, llm_cache_ttl_faq_days: e.target.value }))}\n                placeholder=\"30\"\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"llm_cache_ttl_objection_days\">Objection TTL (days)</Label>\n              <Input\n                id=\"llm_cache_ttl_objection_days\"\n                type=\"number\"\n                value={config.llm_cache_ttl_objection_days}\n                onChange={(e) => setConfig((prev: any) => ({ ...prev, llm_cache_ttl_objection_days: e.target.value }))}\n                placeholder=\"14\"\n              />\n            </div>\n          </div>\n          <div className=\"mt-4 space-y-2\">\n            <p className=\"text-sm text-muted-foreground\">Per-Market Overrides</p>\n            <div className=\"grid grid-cols-1 gap-2 md:grid-cols-4\">\n              <Input placeholder=\"Market (e.g. TX)\" value={marketCode} onChange={(e) => setMarketCode(e.target.value.toUpperCase())} />\n              <Input placeholder=\"Floor e.g. 0.88\" value={marketFloor} onChange={(e) => setMarketFloor(e.target.value)} />\n              <Input placeholder=\"FAQ TTL days\" value={marketTtlFaq} onChange={(e) => setMarketTtlFaq(e.target.value)} />\n              <Input placeholder=\"Objection TTL days\" value={marketTtlObj} onChange={(e) => setMarketTtlObj(e.target.value)} />\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <Button\n                variant=\"outline\"\n                onClick={() => {\n                  if (!marketCode) return\n                  setMarketOverrides((prev) => ({\n                    ...prev,\n                    [marketCode]: {\n                      confidence_floor: Number.parseFloat(marketFloor),\n                      ttl_faq_days: Number.parseInt(marketTtlFaq),\n                      ttl_objection_days: Number.parseInt(marketTtlObj),\n                    },\n                  }))\n                  setMarketCode(\"\")\n                }}\n              >\n                Add/Update Override\n              </Button>\n              <Button\n                variant=\"destructive\"\n                onClick={() => {\n                  if (!marketCode) return\n                  const next = { ...marketOverrides }\n                  delete next[marketCode]\n                  setMarketOverrides(next)\n                  setMarketCode(\"\")\n                }}\n              >\n                Remove Override\n              </Button>\n            </div>\n            <div className=\"rounded border border-border p-2 text-sm\">\n              {Object.keys(marketOverrides).length === 0 ? (\n                <p className=\"text-muted-foreground\">No overrides</p>\n              ) : (\n                Object.entries(marketOverrides).map(([m, v]: any) => (\n                  <div key={m} className=\"flex items-center justify-between\">\n                    <span>{m}</span>\n                    <span>\n                      floor {v?.confidence_floor ?? \"-\"} • faq {v?.ttl_faq_days ?? \"-\"}d • obj {v?.ttl_objection_days ?? \"-\"}d\n                    </span>\n                  </div>\n                ))\n              )}\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Disposition Automation</CardTitle>\n          <CardDescription>Auto evaluate and act during DISPO phase</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center gap-3\">\n            <Label htmlFor=\"auto_dispo_eval_enabled\">Enable Auto Evaluation</Label>\n            <input\n              id=\"auto_dispo_eval_enabled\"\n              type=\"checkbox\"\n              defaultChecked={(initialConfig as any)?.auto_dispo_eval_enabled !== false}\n              onChange={(e) =>\n                setConfig((prev: any) => ({\n                  ...prev,\n                  auto_dispo_eval_enabled: e.target.checked,\n                }))\n              }\n            />\n          </div>\n          <div className=\"grid grid-cols-1 gap-3 md:grid-cols-3\">\n            <div>\n              <Label htmlFor=\"auto_renegotiate_days_threshold\">Renegotiate After (days)</Label>\n              <Input\n                id=\"auto_renegotiate_days_threshold\"\n                type=\"number\"\n                defaultValue={(initialConfig as any)?.auto_renegotiate_days_threshold ?? 5}\n                onChange={(e) =>\n                  setConfig((prev: any) => ({\n                    ...prev,\n                    auto_renegotiate_days_threshold: Number.parseInt(e.target.value),\n                  }))\n                }\n              />\n            </div>\n            <div>\n              <Label htmlFor=\"auto_cancel_days_threshold\">Cancel After (days)</Label>\n              <Input\n                id=\"auto_cancel_days_threshold\"\n                type=\"number\"\n                defaultValue={(initialConfig as any)?.auto_cancel_days_threshold ?? 10}\n                onChange={(e) =>\n                  setConfig((prev: any) => ({\n                    ...prev,\n                    auto_cancel_days_threshold: Number.parseInt(e.target.value),\n                  }))\n                }\n              />\n            </div>\n            <div className=\"flex items-center gap-3\">\n              <Label htmlFor=\"auto_dispo_require_human_confirm\">Require Human Confirm</Label>\n              <input\n                id=\"auto_dispo_require_human_confirm\"\n                type=\"checkbox\"\n                defaultChecked={(initialConfig as any)?.auto_dispo_require_human_confirm !== false}\n                onChange={(e) =>\n                  setConfig((prev: any) => ({\n                    ...prev,\n                    auto_dispo_require_human_confirm: e.target.checked,\n                  }))\n                }\n              />\n            </div>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={async () => {\n                const resp = await fetch(\"/api/dispo/auto/run\", { method: \"POST\" })\n                const j = await resp.json()\n                alert(resp.ok ? `Evaluated ${j.evaluated} deals • Actions ${j.actions}` : j.error || \"Run failed\")\n              }}\n            >\n              Run Now\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n      <Card>\n        <CardHeader>\n          <CardTitle>Offer Calculation</CardTitle>\n          <CardDescription>Configure the MAO formula parameters</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"arv_multiplier\">ARV Multiplier</Label>\n            <Input\n              id=\"arv_multiplier\"\n              type=\"number\"\n              step=\"0.01\"\n              value={config.arv_multiplier}\n              onChange={(e) => setConfig((prev) => ({ ...prev, arv_multiplier: e.target.value }))}\n              placeholder=\"0.70\"\n            />\n            <p className=\"mt-1 text-sm text-muted-foreground\">Typically 0.70 (70%) for wholesaling</p>\n          </div>\n          <div>\n            <Label htmlFor=\"wholesaling_fee\">Wholesaling Fee ($)</Label>\n            <Input\n              id=\"wholesaling_fee\"\n              type=\"number\"\n              value={config.wholesaling_fee}\n              onChange={(e) => setConfig((prev) => ({ ...prev, wholesaling_fee: e.target.value }))}\n              placeholder=\"10000\"\n            />\n            <p className=\"mt-1 text-sm text-muted-foreground\">Your assignment fee deducted from MAO</p>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Follow-up Settings</CardTitle>\n          <CardDescription>Configure automated follow-up behavior</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div>\n            <Label htmlFor=\"follow_up_hours\">Follow-up Delay (hours)</Label>\n            <Input\n              id=\"follow_up_hours\"\n              type=\"number\"\n              value={config.follow_up_hours}\n              onChange={(e) => setConfig((prev) => ({ ...prev, follow_up_hours: e.target.value }))}\n              placeholder=\"24\"\n            />\n            <p className=\"mt-1 text-sm text-muted-foreground\">Hours to wait before sending follow-up</p>\n          </div>\n          <div>\n            <Label htmlFor=\"max_follow_ups\">Max Follow-ups</Label>\n            <Input\n              id=\"max_follow_ups\"\n              type=\"number\"\n              value={config.max_follow_ups}\n              onChange={(e) => setConfig((prev) => ({ ...prev, max_follow_ups: e.target.value }))}\n              placeholder=\"3\"\n            />\n            <p className=\"mt-1 text-sm text-muted-foreground\">Maximum follow-up messages per lead</p>\n          </div>\n          <div>\n            <Label htmlFor=\"followup_backoff_minutes\">Backoff Minutes</Label>\n            <Input\n              id=\"followup_backoff_minutes\"\n              type=\"number\"\n              value={config.followup_backoff_minutes}\n              onChange={(e) => setConfig((prev) => ({ ...prev, followup_backoff_minutes: e.target.value }))}\n              placeholder=\"15\"\n            />\n            <p className=\"mt-1 text-sm text-muted-foreground\">Minutes to wait before retrying failed follow-up</p>\n          </div>\n          <div>\n            <Label htmlFor=\"followup_max_attempts\">Max Retry Attempts</Label>\n            <Input\n              id=\"followup_max_attempts\"\n              type=\"number\"\n              value={config.followup_max_attempts}\n              onChange={(e) => setConfig((prev) => ({ ...prev, followup_max_attempts: e.target.value }))}\n              placeholder=\"3\"\n            />\n            <p className=\"mt-1 text-sm text-muted-foreground\">Max retries per follow-up message</p>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Twilio Configuration</CardTitle>\n          <CardDescription>Add these environment variables to enable SMS</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"rounded-lg bg-muted p-4 font-mono text-sm\">\n            <p>TWILIO_ACCOUNT_SID=your_account_sid</p>\n            <p>TWILIO_AUTH_TOKEN=your_auth_token</p>\n            <p>TWILIO_PHONE_NUMBER=+1234567890</p>\n            <p>TWILIO_NUMBER_POOL=+15551230001,+15551230002,+15551230003</p>\n            <p>SMS_MONTHLY_LIMIT_PER_NUMBER=10000</p>\n            <p>SMS_RATE_LIMIT_PER_MIN=25</p>\n            <p>SMS_QUIET_HOURS_START=8</p>\n            <p>SMS_QUIET_HOURS_END=21</p>\n          </div>\n          <p className=\"mt-4 text-sm text-muted-foreground\">\n            Set your Twilio webhook URL to: <code className=\"rounded bg-muted px-1\">/api/twilio/incoming</code>\n          </p>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Phone Provider Health</CardTitle>\n          <CardDescription>Last-hour sends per number to monitor rate limiting</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Button variant=\"outline\" onClick={loadHealth} disabled={loadingHealth}>\n            {loadingHealth ? \"Loading...\" : \"Load Health\"}\n          </Button>\n          <div className=\"mt-3 space-y-2 font-mono text-sm\">\n            {Object.keys(health).length === 0 ? (\n              <p className=\"text-muted-foreground\">No data yet</p>\n            ) : (\n              Object.entries(health).map(([from, count]) => (\n                <div key={from} className=\"flex items-center justify-between\">\n                  <span>{from}</span>\n                  <span>{count}</span>\n                </div>\n              ))\n            )}\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>FAQ Cache</CardTitle>\n          <CardDescription>Manage cached responses to reduce LLM usage</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <div className=\"flex items-center gap-2\">\n            <Input id=\"faq-search\" placeholder=\"Search canonical question\" className=\"flex-1\" />\n            <Button\n              variant=\"outline\"\n              onClick={async () => {\n                const q = (document.getElementById(\"faq-search\") as HTMLInputElement).value\n                const resp = await fetch(`/api/faq-cache?q=${encodeURIComponent(q)}`)\n                const j = await resp.json()\n                const list = Array.isArray(j.entries) ? j.entries : []\n                alert(`Found ${list.length} entries`)\n              }}\n            >\n              Search\n            </Button>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              onClick={async () => {\n                const resp = await fetch(\"/api/faq-cache/seed\", { method: \"POST\" })\n                const j = await resp.json()\n                alert(resp.ok ? `Seeded ${j.inserted} FAQs` : j.error || \"Seed failed\")\n              }}\n            >\n              Seed 20 FAQs\n            </Button>\n            <Button\n              variant=\"outline\"\n              onClick={async () => {\n                const resp = await fetch(\"/api/faq-cache\")\n                const j = await resp.json()\n                const list = Array.isArray(j.entries) ? j.entries : []\n                alert(`Cache entries: ${list.length}`)\n              }}\n            >\n              List Cache\n            </Button>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <select id=\"faq-intent\" className=\"rounded border border-border bg-background p-2 text-sm\">\n              <option value=\"FAQ_PROCESS\">FAQ_PROCESS</option>\n              <option value=\"FAQ_FEES\">FAQ_FEES</option>\n              <option value=\"FAQ_TRUST\">FAQ_TRUST</option>\n              <option value=\"FAQ_CONTRACT\">FAQ_CONTRACT</option>\n              <option value=\"FAQ_GENERAL\">FAQ_GENERAL</option>\n              <option value=\"OBJECTION_PRICE\">OBJECTION_PRICE</option>\n              <option value=\"OBJECTION_DELAY\">OBJECTION_DELAY</option>\n            </select>\n            <Input id=\"faq-q\" placeholder=\"Normalized question\" className=\"flex-1\" />\n            <Input id=\"faq-a\" placeholder=\"Response text\" className=\"flex-1\" />\n            <Input id=\"faq-market\" placeholder=\"Market (optional)\" className=\"w-40\" />\n            <Button\n              variant=\"outline\"\n              onClick={async () => {\n                const intent = (document.getElementById(\"faq-intent\") as HTMLSelectElement).value\n                const normalized_question = (document.getElementById(\"faq-q\") as HTMLInputElement).value.trim().toLowerCase()\n                const response_text = (document.getElementById(\"faq-a\") as HTMLInputElement).value\n                const market = (document.getElementById(\"faq-market\") as HTMLInputElement).value || undefined\n                if (!intent || !normalized_question || !response_text) {\n                  alert(\"Fill all fields\")\n                  return\n                }\n                const resp = await fetch(\"/api/faq-cache\", {\n                  method: \"POST\",\n                  headers: { \"Content-Type\": \"application/json\" },\n                  body: JSON.stringify({ intent, normalized_question, response_text, market, canonical_question: normalized_question }),\n                })\n                const j = await resp.json()\n                alert(resp.ok ? \"Upserted\" : j.error || \"Failed\")\n              }}\n            >\n              Upsert Cache Entry\n            </Button>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Input id=\"faq-id\" placeholder=\"Entry ID\" className=\"flex-1\" />\n            <Button\n              variant=\"destructive\"\n              onClick={async () => {\n                const id = (document.getElementById(\"faq-id\") as HTMLInputElement).value\n                if (!id) return alert(\"Provide entry ID\")\n                const resp = await fetch(`/api/faq-cache?id=${encodeURIComponent(id)}`, { method: \"DELETE\" })\n                const j = await resp.json()\n                alert(resp.ok ? \"Purged\" : j.error || \"Failed\")\n              }}\n            >\n              Purge Entry\n            </Button>\n            <Button\n              variant=\"outline\"\n              onClick={async () => {\n                const id = (document.getElementById(\"faq-id\") as HTMLInputElement).value\n                if (!id) return alert(\"Provide entry ID\")\n                const resp = await fetch(`/api/faq-cache/warm`, {\n                  method: \"POST\",\n                  headers: { \"Content-Type\": \"application/json\" },\n                  body: JSON.stringify({ id }),\n                })\n                const j = await resp.json()\n                alert(resp.ok ? \"Embedded\" : j.error || \"Failed\")\n              }}\n            >\n              Warm Embedding\n            </Button>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"ghost\"\n              onClick={async () => {\n                const resp = await fetch(\"/api/faq-cache\")\n                const j = await resp.json()\n                const list = Array.isArray(j.entries) ? j.entries : []\n                setCacheEntries(list)\n              }}\n            >\n              Load Cache Entries\n            </Button>\n          </div>\n          {cacheEntries.length > 0 && (\n            <div className=\"rounded border border-border\">\n              <table className=\"w-full text-sm\">\n                <thead>\n                  <tr className=\"text-muted-foreground\">\n                    <th className=\"p-2 text-left\">Intent</th>\n                    <th className=\"p-2 text-left\">Question</th>\n                    <th className=\"p-2 text-left\">Market</th>\n                    <th className=\"p-2 text-left\">Usage</th>\n                    <th className=\"p-2 text-left\">Last Used</th>\n                    <th className=\"p-2 text-left\">Actions</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {cacheEntries.map((e) => (\n                    <tr key={e.id} className=\"border-t border-border\">\n                      <td className=\"p-2\">{e.intent}</td>\n                      <td className=\"p-2\">{e.canonical_question || e.normalized_question}</td>\n                      <td className=\"p-2\">{e.market || \"-\"}</td>\n                      <td className=\"p-2\">{typeof e.usage_count === \"number\" ? e.usage_count : \"-\"}</td>\n                      <td className=\"p-2\">{e.last_used_at ? new Date(e.last_used_at).toLocaleString() : \"-\"}</td>\n                      <td className=\"p-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <Button\n                            variant=\"outline\"\n                            onClick={async () => {\n                              await fetch(\"/api/faq-cache/warm\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify({ id: e.id }) })\n                              alert(\"Embedded\")\n                            }}\n                          >\n                            Warm\n                          </Button>\n                          <Button\n                            variant=\"destructive\"\n                            onClick={async () => {\n                              await fetch(`/api/faq-cache?id=${encodeURIComponent(e.id)}`, { method: \"DELETE\" })\n                              setCacheEntries((prev) => prev.filter((x) => x.id !== e.id))\n                            }}\n                          >\n                            Purge\n                          </Button>\n                        </div>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Contract Templates</CardTitle>\n          <CardDescription>Upload PDFs to store securely and send via SMS</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-3\">\n          <div className=\"flex items-center gap-2\">\n            <input id=\"tpl-file\" type=\"file\" accept=\"application/pdf\" />\n            <Input id=\"tpl-name\" placeholder=\"Template name\" />\n            <select id=\"tpl-role\" className=\"rounded border border-border bg-background p-2 text-sm\">\n              <option value=\"seller\">Seller</option>\n              <option value=\"buyer\">Buyer</option>\n            </select>\n            <Input id=\"tpl-state\" placeholder=\"State (e.g. TX)\" className=\"w-24\" />\n            <Button\n              variant=\"outline\"\n              onClick={async () => {\n                const fileInput = document.getElementById(\"tpl-file\") as HTMLInputElement\n                const nameInput = document.getElementById(\"tpl-name\") as HTMLInputElement\n                const roleInput = document.getElementById(\"tpl-role\") as HTMLSelectElement\n                const stateInput = document.getElementById(\"tpl-state\") as HTMLInputElement\n                if (!fileInput.files?.[0] || !nameInput.value) {\n                  alert(\"Pick a PDF and enter a name\")\n                  return\n                }\n                const form = new FormData()\n                form.append(\"file\", fileInput.files[0])\n                form.append(\"name\", nameInput.value)\n                if (roleInput.value) form.append(\"role\", roleInput.value)\n                if (stateInput.value) form.append(\"state\", stateInput.value)\n                const resp = await fetch(\"/api/contracts/templates\", { method: \"POST\", body: form })\n                const j = await resp.json()\n                if (!resp.ok) {\n                  alert(j.error || \"Upload failed\")\n                } else {\n                  alert(\"Template uploaded\")\n                  fileInput.value = \"\"\n                  nameInput.value = \"\"\n                  stateInput.value = \"\"\n                }\n              }}\n            >\n              Upload\n            </Button>\n            <Button\n              variant=\"outline\"\n              onClick={async () => {\n                await fetch(\"/api/contracts/setup\", { method: \"POST\" })\n                alert(\"Bucket initialized\")\n              }}\n            >\n              Initialize Bucket\n            </Button>\n          </div>\n          <div className=\"mt-2\">\n            <Button\n              variant=\"ghost\"\n              onClick={async () => {\n                const resp = await fetch(\"/api/contracts/templates\")\n                const j = await resp.json()\n                const list = Array.isArray(j.templates) ? j.templates : []\n                alert(`Templates:\\n${list.map((t: any) => `${t.name} (${t.storage_path})`).join(\"\\n\") || \"none\"}`)\n              }}\n            >\n              List Templates\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Button onClick={handleSave} disabled={saving} className=\"w-full\">\n        {saving ? \"Saving...\" : \"Save Settings\"}\n      </Button>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}