{"version":3,"sources":["../../../lib/negotiation-rails.ts"],"sourcesContent":["import type { Lead } from \"@/lib/types\"\n\nexport function mao(arv: number, repairs: number, fee: number, multiplier: number): number {\n  const v = arv * multiplier - repairs - fee\n  return Math.max(0, Math.round(v))\n}\n\nexport function enforceRails(lead: Lead, maoValue: number, proposed?: number): { allowed: boolean; nextAmount?: number } {\n  const softCeil = Math.round(maoValue * 1.02)\n  const hardFloor = Math.round(maoValue * 0.9)\n  const p = proposed ?? lead.offer_amount ?? 0\n  if (!p) return { allowed: true, nextAmount: hardFloor }\n  if (p > softCeil) return { allowed: false, nextAmount: softCeil }\n  if (p < hardFloor) return { allowed: false, nextAmount: hardFloor }\n  return { allowed: true, nextAmount: p }\n}\n\n"],"names":[],"mappings":"uCAEO,SAAS,EAAI,CAAW,CAAE,CAAe,CAAE,CAAW,CAAE,CAAkB,EAE/E,OAAO,KAAK,GAAG,CAAC,EAAG,KAAK,KAAK,CAAC,AADpB,EAAM,EAAa,EAAU,GAEzC,CAEO,SAAS,EAAa,CAAU,CAAE,CAAgB,CAAE,CAAiB,EAC1E,IAAM,EAAW,KAAK,KAAK,CAAY,KAAX,GACtB,EAAY,KAAK,KAAK,CAAY,GAAX,GACvB,EAAI,GAAY,EAAK,YAAY,EAAI,SAC3C,AAAK,EACD,CADI,CAAJ,AACI,EAAiB,CAAE,OAAT,EAAkB,EAAO,WAAY,CAAS,EAC5D,EAAI,EAAkB,CAAE,QAAT,CAAkB,EAAO,WAAY,CAAU,EAC3D,CAAE,SAAS,EAAM,WAAY,CAAE,EAHvB,CAAE,SAAS,EAAM,WAAY,CAAU,CAIxD"}