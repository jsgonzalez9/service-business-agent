{"version":3,"sources":["../../../lib/docuseal.ts"],"sourcesContent":["export async function createSigningPacket(opts: {\n  baseUrl: string\n  apiToken: string\n  templateId: string\n  submitters: Array<{ name: string; email?: string; phone?: string }>\n  fields?: Record<string, string | number | boolean>\n}): Promise<{ packetId?: string; signingUrls?: string[]; error?: string }> {\n  try {\n    const res = await fetch(`${opts.baseUrl}/api/packets`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${opts.apiToken}`,\n      },\n      body: JSON.stringify({\n        template_id: opts.templateId,\n        submitters: opts.submitters,\n        fields: opts.fields || {},\n      }),\n    })\n    if (!res.ok) {\n      return { error: `DocuSeal create failed: ${res.status} ${res.statusText}` }\n    }\n    const j = await res.json().catch(() => ({}))\n    const urls: string[] = Array.isArray(j?.submitters)\n      ? j.submitters.map((s: any) => s?.signing_url).filter(Boolean)\n      : []\n    return { packetId: j?.id || j?.packet_id, signingUrls: urls }\n  } catch (e: any) {\n    return { error: e?.message || \"DocuSeal create failed\" }\n  }\n}\n\nexport async function downloadCompletedPdf(opts: {\n  baseUrl: string\n  apiToken: string\n  packetId: string\n}): Promise<{ blob?: Blob; error?: string }> {\n  try {\n    const res = await fetch(`${opts.baseUrl}/api/packets/${opts.packetId}/download`, {\n      headers: { Authorization: `Bearer ${opts.apiToken}` },\n    })\n    if (!res.ok) return { error: `DocuSeal download failed: ${res.status} ${res.statusText}` }\n    const blob = await res.blob()\n    return { blob }\n  } catch (e: any) {\n    return { error: e?.message || \"DocuSeal download failed\" }\n  }\n}\n"],"names":[],"mappings":"sCAAO,eAAe,EAAoB,CAMzC,EACC,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CAAA,EAAG,EAAK,OAAO,CAAC,YAAY,CAAC,CAAE,CACrD,OAAQ,OACR,QAAS,CACP,eAAgB,mBAChB,cAAe,CAAC,OAAO,EAAE,EAAK,QAAQ,CAAA,CAAE,AAC1C,EACA,KAAM,KAAK,SAAS,CAAC,CACnB,YAAa,EAAK,UAAU,CAC5B,WAAY,EAAK,UAAU,CAC3B,OAAQ,EAAK,MAAM,EAAI,CAAC,CAC1B,EACF,GACA,GAAI,CAAC,EAAI,EAAE,CACT,CADW,KACJ,CAAE,MAAO,CAAC,wBAAwB,EAAE,EAAI,MAAM,CAAC,CAAC,EAAE,EAAI,UAAU,CAAA,CAAE,AAAC,EAE5E,IAAM,EAAI,MAAM,EAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,EAAC,CAAC,EACpC,EAAiB,MAAM,OAAO,CAAC,GAAG,YACpC,EAAE,UAAU,CAAC,GAAG,CAAC,AAAC,GAAW,GAAG,aAAa,MAAM,CAAC,SACpD,EAAE,CACN,MAAO,CAAE,SAAU,GAAG,IAAM,GAAG,UAAW,YAAa,CAAK,CAC9D,CAAE,MAAO,EAAQ,CACf,MAAO,CAAE,MAAO,GAAG,SAAW,wBAAyB,CACzD,CACF,CAEO,eAAe,EAAqB,CAI1C,EACC,GAAI,CACF,IAAM,EAAM,MAAM,MAAM,CAAA,EAAG,EAAK,OAAO,CAAC,aAAa,EAAE,EAAK,QAAQ,CAAC,SAAS,CAAC,CAAE,CAC/E,QAAS,CAAE,cAAe,CAAC,OAAO,EAAE,EAAK,QAAQ,CAAA,CAAE,AAAC,CACtD,GACA,GAAI,CAAC,EAAI,EAAE,CAAE,MAAO,CAAE,MAAO,CAAC,0BAA0B,EAAE,EAAI,MAAM,CAAC,CAAC,EAAE,EAAI,UAAU,CAAA,CAAE,AAAC,EAEzF,MAAO,CAAE,KADI,MAAM,EAAI,IAAI,EACb,CAChB,CAAE,MAAO,EAAQ,CACf,MAAO,CAAE,MAAO,GAAG,SAAW,0BAA2B,CAC3D,CACF"}