{"version":3,"sources":["../../../lib/scoring.ts"],"sourcesContent":["import type { Lead, Message } from \"@/lib/types\"\n\nexport function scoreLead(lead: Lead, recentMsgs: Message[]): number {\n  let s = 0\n  const m = (lead.motivation || \"\").toLowerCase()\n  if (m.includes(\"urgent\") || m.includes(\"need\") || m.includes(\"must\") || m.includes(\"foreclosure\")) s += 20\n  const price = lead.price_expectation || 0\n  const offer = lead.offer_amount || 0\n  if (price && offer && price <= offer * 1.2) s += 20\n  const t = (lead.timeline || \"\").toLowerCase()\n  if (t.includes(\"week\") || t.includes(\"asap\") || t.includes(\"days\")) s += 15\n  const cond = (lead.property_condition || \"\").toLowerCase()\n  if (cond.includes(\"needs\") || cond.includes(\"repairs\") || cond.includes(\"distress\")) s += 15\n  const responsiveness = recentMsgs.slice(-5).length >= 3 ? 15 : 0\n  s += responsiveness\n  const objections = recentMsgs.filter((r) => r.content.toLowerCase().includes(\"too low\") || r.content.toLowerCase().includes(\"more\")).length\n  s -= Math.min(objections * 5, 15)\n  return Math.max(0, Math.min(100, s))\n}\n\n"],"names":[],"mappings":"uCAEO,SAAS,EAAU,CAAU,CAAE,CAAqB,EACzD,IAAI,EAAI,EACF,EAAI,CAAC,EAAK,UAAU,EAAI,EAAA,CAAE,CAAE,WAAW,IACzC,EAAE,QAAQ,CAAC,WAAa,EAAE,QAAQ,CAAC,SAAW,EAAE,QAAQ,CAAC,SAAW,EAAE,QAAQ,CAAC,cAAA,IAAgB,GAAK,EAAA,EACxG,IAAM,EAAQ,EAAK,iBAAiB,EAAI,EAClC,EAAQ,EAAK,YAAY,EAAI,EAC/B,GAAS,GAAS,GAAiB,IAAR,IAAa,GAAK,EAAA,EACjD,IAAM,EAAI,CAAC,EAAK,QAAQ,EAAI,EAAA,CAAE,CAAE,WAAW,GACvC,GAAE,QAAQ,CAAC,SAAW,EAAE,QAAQ,CAAC,SAAW,EAAE,QAAQ,CAAC,OAAA,IAAS,GAAK,EAAA,EACzE,IAAM,EAAO,CAAC,EAAK,kBAAkB,EAAI,EAAA,CAAE,CAAE,WAAW,GAMxD,OALI,EAAK,QAAQ,CAAC,UAAY,EAAK,QAAQ,CAAC,YAAc,EAAK,QAAQ,CAAC,WAAA,IAAa,GAAK,EAAA,EAE1F,GAD0D,EACrD,EADkB,CAAwC,CAA7B,KAAK,CAAC,CAAC,GAAG,MAAM,GAAI,EAI/C,KAAK,GAAG,CAAC,EAAG,KAAK,GAAG,CAAC,IAD5B,CACiC,EAD5B,KAAK,GAAG,CAAC,AAAa,EADR,EAAW,MAAM,CAAC,AAAC,GAAM,EAAE,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,YAAc,EAAE,OAAO,CAAC,WAAW,GAAG,QAAQ,CAAC,SAAS,MAAM,CAC7G,KAEhC"}