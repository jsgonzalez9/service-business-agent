(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,95187,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={callServer:function(){return s.callServer},createServerReference:function(){return i.createServerReference},findSourceMapURL:function(){return o.findSourceMapURL}};for(var r in n)Object.defineProperty(a,r,{enumerable:!0,get:n[r]});let s=e.r(32120),o=e.r(92245),i=e.r(35326)},308,e=>{"use strict";let t,a,n;var r,s,o,i,l,d,c,u,m,f=e.i(43476),p=e.i(71645),h=e.i(47163),g=e.i(94179),x=e.i(23750),v=e.i(67881),y=e.i(75254);let b=(0,y.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),w=(0,y.default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),j=(0,y.default)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),N={cold_lead:"bg-muted text-muted-foreground",contacted:"bg-blue-500/10 text-blue-500",qualified:"bg-primary/10 text-primary",offer_made:"bg-warning/10 text-warning",offer_accepted:"bg-success/10 text-success",contract_sent:"bg-purple-500/10 text-purple-500",contract_signed:"bg-success/10 text-success",closed:"bg-success/10 text-success",lost:"bg-destructive/10 text-destructive",warm_call_requested:"bg-orange-500/10 text-orange-500",schedule_call:"bg-teal-500/10 text-teal-500",ready_for_offer_call:"bg-emerald-500/10 text-emerald-500",text_only:"bg-gray-500/10 text-gray-500"},C={cold_lead:"Cold",contacted:"Contacted",qualified:"Qualified",offer_made:"Offer Made",offer_accepted:"Accepted",contract_sent:"Contract Sent",contract_signed:"Signed",closed:"Closed",lost:"Lost",warm_call_requested:"Call Requested",schedule_call:"Scheduled Call",ready_for_offer_call:"Offer Call",text_only:"Text Only"};function k({leads:e,selectedLead:t,onSelectLead:a}){let[n,r]=(0,p.useState)(""),[s,o]=(0,p.useState)(""),[i,l]=(0,p.useState)({}),[d,c]=(0,p.useState)(""),u=e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase())||e.address.toLowerCase().includes(n.toLowerCase())||e.phone_number.includes(n));return(0,f.jsxs)("div",{className:"flex h-full flex-col",children:[(0,f.jsxs)("div",{className:"border-b border-border p-4",children:[(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)(b,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,f.jsx)(x.Input,{placeholder:"Search leads...",value:n,onChange:e=>r(e.target.value),className:"pl-9"})]}),(0,f.jsx)("div",{className:"mt-3 flex gap-2",children:(0,f.jsx)(x.Input,{placeholder:"Pipeline filter: NEW/WARM/HOT/FOLLOW-UP",value:s,onChange:e=>o(e.target.value)})})]}),(0,f.jsx)("div",{className:"flex-1 overflow-y-auto",children:0===u.length?(0,f.jsx)("div",{className:"p-8 text-center text-muted-foreground",children:(0,f.jsx)("p",{children:"No leads found"})}):u.filter(e=>!s||(e.pipeline_status||"").toLowerCase()===s.toLowerCase()).map(e=>(0,f.jsxs)("div",{className:(0,h.cn)("cursor-pointer border-b border-border p-4 transition-colors hover:bg-muted/50",t?.id===e.id&&"bg-muted"),onClick:()=>a(e),children:[(0,f.jsxs)("div",{className:"mb-2 flex items-start justify-between",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)("input",{type:"checkbox",checked:!!i[e.id],onChange:t=>l(a=>({...a,[e.id]:t.target.checked})),onClick:e=>e.stopPropagation()}),(0,f.jsx)("h3",{className:"font-medium text-foreground",onClick:()=>a(e),children:e.name})]}),(0,f.jsx)(g.Badge,{variant:"secondary",className:(0,h.cn)("text-xs",N[e.conversation_state]),children:C[e.conversation_state]})]}),(0,f.jsxs)("div",{className:"space-y-1 text-sm text-muted-foreground",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(w,{className:"h-3 w-3"}),(0,f.jsx)("span",{className:"truncate",children:e.address})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(j,{className:"h-3 w-3"}),(0,f.jsx)("span",{children:e.phone_number})]}),e.pipeline_status&&(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(g.Badge,{variant:"outline",className:"text-xs",children:e.pipeline_status}),"number"==typeof e.score&&(0,f.jsxs)("span",{className:"text-xs",children:["Score: ",e.score]})]})]}),e.last_message_at&&(0,f.jsxs)("p",{className:"mt-2 text-xs text-muted-foreground",children:["Last activity: ",new Date(e.last_message_at).toLocaleDateString()]})]},e.id))}),(0,f.jsx)("div",{className:"border-t border-border p-3",children:(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(x.Input,{placeholder:"Bulk message",value:d,onChange:e=>c(e.target.value)}),(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{let e=Object.keys(i).filter(e=>i[e]);0!==e.length&&(await fetch("/api/leads/bulk/actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"bulk_sms",leadIds:e,payload:{message:d}})}),c(""))},children:"Send SMS"}),(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{let e=Object.keys(i).filter(e=>i[e]);0!==e.length&&(await fetch("/api/leads/bulk/actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"assign_closer",leadIds:e})}),alert("Assigned to closer"))},children:"Assign to Closer"}),(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{let e=Object.keys(i).filter(e=>i[e]);0!==e.length&&(await fetch("/api/leads/bulk/actions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"schedule_followup",leadIds:e})}),alert("Follow-ups scheduled"))},children:"Schedule Follow-ups"})]})})]})}function S({className:e,...t}){return(0,f.jsx)("textarea",{"data-slot":"textarea",className:(0,h.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}var E=e.i(70065);function _(e,t=[]){let a=[],n=()=>{let t=a.map(e=>p.createContext(e));return function(a){let n=a?.[e]||t;return p.useMemo(()=>({[`__scope${e}`]:{...a,[e]:n}}),[a,n])}};return n.scopeName=e,[function(t,n){let r=p.createContext(n),s=a.length;a=[...a,n];let o=t=>{let{scope:a,children:n,...o}=t,i=a?.[e]?.[s]||r,l=p.useMemo(()=>o,Object.values(o));return(0,f.jsx)(i.Provider,{value:l,children:n})};return o.displayName=t+"Provider",[o,function(a,o){let i=o?.[e]?.[s]||r,l=p.useContext(i);if(l)return l;if(void 0!==n)return n;throw Error(`\`${a}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let a=()=>{let a=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=a.reduce((t,{useScope:a,scopeName:n})=>{let r=a(e)[`__scope${n}`];return{...t,...r}},{});return p.useMemo(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return a.scopeName=t.scopeName,a}(n,...t)]}var T=e.i(20783);function M(e,t,{checkForDefaultPrevented:a=!0}={}){return function(n){if(e?.(n),!1===a||!n.defaultPrevented)return t?.(n)}}var O=globalThis?.document?p.useLayoutEffect:()=>{},R=p["useId".toString()]||(()=>void 0),L=0;function A(e){let[t,a]=p.useState(R());return O(()=>{e||a(e=>e??String(L++))},[e]),e||(t?`radix-${t}`:"")}function P(e){let t=p.useRef(e);return p.useEffect(()=>{t.current=e}),p.useMemo(()=>(...e)=>t.current?.(...e),[])}var I=e.i(48425),D="dismissableLayer.update",B=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),F=p.forwardRef((e,t)=>{let{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:n,onPointerDownOutside:r,onFocusOutside:s,onInteractOutside:o,onDismiss:i,...l}=e,d=p.useContext(B),[c,m]=p.useState(null),h=c?.ownerDocument??globalThis?.document,[,g]=p.useState({}),x=(0,T.useComposedRefs)(t,e=>m(e)),v=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=v.indexOf(y),w=c?v.indexOf(c):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,N=w>=b,C=function(e,t=globalThis?.document){let a=P(e),n=p.useRef(!1),r=p.useRef(()=>{});return p.useEffect(()=>{let e=e=>{if(e.target&&!n.current){let n=function(){q("dismissableLayer.pointerDownOutside",a,s,{discrete:!0})},s={originalEvent:e};"touch"===e.pointerType?(t.removeEventListener("click",r.current),r.current=n,t.addEventListener("click",r.current,{once:!0})):n()}else t.removeEventListener("click",r.current);n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",r.current)}},[t,a]),{onPointerDownCapture:()=>n.current=!0}}(e=>{let t=e.target,a=[...d.branches].some(e=>e.contains(t));N&&!a&&(r?.(e),o?.(e),e.defaultPrevented||i?.())},h),k=function(e,t=globalThis?.document){let a=P(e),n=p.useRef(!1);return p.useEffect(()=>{let e=e=>{e.target&&!n.current&&q("dismissableLayer.focusOutside",a,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,a]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{let t=e.target;![...d.branches].some(e=>e.contains(t))&&(s?.(e),o?.(e),e.defaultPrevented||i?.())},h);return!function(e,t=globalThis?.document){let a=P(e);p.useEffect(()=>{let e=e=>{"Escape"===e.key&&a(e)};return t.addEventListener("keydown",e,{capture:!0}),()=>t.removeEventListener("keydown",e,{capture:!0})},[a,t])}(e=>{w===d.layers.size-1&&(n?.(e),!e.defaultPrevented&&i&&(e.preventDefault(),i()))},h),p.useEffect(()=>{if(c)return a&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(u=h.body.style.pointerEvents,h.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(c)),d.layers.add(c),$(),()=>{a&&1===d.layersWithOutsidePointerEventsDisabled.size&&(h.body.style.pointerEvents=u)}},[c,h,a,d]),p.useEffect(()=>()=>{c&&(d.layers.delete(c),d.layersWithOutsidePointerEventsDisabled.delete(c),$())},[c,d]),p.useEffect(()=>{let e=()=>g({});return document.addEventListener(D,e),()=>document.removeEventListener(D,e)},[]),(0,f.jsx)(I.Primitive.div,{...l,ref:x,style:{pointerEvents:j?N?"auto":"none":void 0,...e.style},onFocusCapture:M(e.onFocusCapture,k.onFocusCapture),onBlurCapture:M(e.onBlurCapture,k.onBlurCapture),onPointerDownCapture:M(e.onPointerDownCapture,C.onPointerDownCapture)})});function $(){let e=new CustomEvent(D);document.dispatchEvent(e)}function q(e,t,a,{discrete:n}){let r=a.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:a});t&&r.addEventListener(e,t,{once:!0}),n?(0,I.dispatchDiscreteCustomEvent)(r,s):r.dispatchEvent(s)}F.displayName="DismissableLayer",p.forwardRef((e,t)=>{let a=p.useContext(B),n=p.useRef(null),r=(0,T.useComposedRefs)(t,n);return p.useEffect(()=>{let e=n.current;if(e)return a.branches.add(e),()=>{a.branches.delete(e)}},[a.branches]),(0,f.jsx)(I.Primitive.div,{...e,ref:r})}).displayName="DismissableLayerBranch";var z="focusScope.autoFocusOnMount",U="focusScope.autoFocusOnUnmount",H={bubbles:!1,cancelable:!0},W=p.forwardRef((e,t)=>{let{loop:a=!1,trapped:n=!1,onMountAutoFocus:r,onUnmountAutoFocus:s,...o}=e,[i,l]=p.useState(null),d=P(r),c=P(s),u=p.useRef(null),m=(0,T.useComposedRefs)(t,e=>l(e)),h=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(n){let e=function(e){if(h.paused||!i)return;let t=e.target;i.contains(t)?u.current=t:Y(u.current,{select:!0})},t=function(e){if(h.paused||!i)return;let t=e.relatedTarget;null!==t&&(i.contains(t)||Y(u.current,{select:!0}))};document.addEventListener("focusin",e),document.addEventListener("focusout",t);let a=new MutationObserver(function(e){if(document.activeElement===document.body)for(let t of e)t.removedNodes.length>0&&Y(i)});return i&&a.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),a.disconnect()}}},[n,i,h.paused]),p.useEffect(()=>{if(i){K.add(h);let e=document.activeElement;if(!i.contains(e)){let t=new CustomEvent(z,H);i.addEventListener(z,d),i.dispatchEvent(t),t.defaultPrevented||(function(e,{select:t=!1}={}){let a=document.activeElement;for(let n of e)if(Y(n,{select:t}),document.activeElement!==a)return}(V(i).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&Y(i))}return()=>{i.removeEventListener(z,d),setTimeout(()=>{let t=new CustomEvent(U,H);i.addEventListener(U,c),i.dispatchEvent(t),t.defaultPrevented||Y(e??document.body,{select:!0}),i.removeEventListener(U,c),K.remove(h)},0)}}},[i,d,c,h]);let g=p.useCallback(e=>{if(!a&&!n||h.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,r=document.activeElement;if(t&&r){var s;let t,n=e.currentTarget,[o,i]=[J(t=V(s=n),s),J(t.reverse(),s)];o&&i?e.shiftKey||r!==i?e.shiftKey&&r===o&&(e.preventDefault(),a&&Y(i,{select:!0})):(e.preventDefault(),a&&Y(o,{select:!0})):r===n&&e.preventDefault()}},[a,n,h.paused]);return(0,f.jsx)(I.Primitive.div,{tabIndex:-1,...o,ref:m,onKeyDown:g})});function V(e){let t=[],a=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)t.push(a.currentNode);return t}function J(e,t){for(let a of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(a,{upTo:t}))return a}function Y(e,{select:t=!1}={}){if(e&&e.focus){var a;let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&(a=e)instanceof HTMLInputElement&&"select"in a&&t&&e.select()}}W.displayName="FocusScope";var K=(n=[],{add(e){let t=n[0];e!==t&&t?.pause(),(n=X(n,e)).unshift(e)},remove(e){n=X(n,e),n[0]?.resume()}});function X(e,t){let a=[...e],n=a.indexOf(t);return -1!==n&&a.splice(n,1),a}var Z=e.i(74080),G=p.forwardRef((e,t)=>{let{container:a,...n}=e,[r,s]=p.useState(!1);O(()=>s(!0),[]);let o=a||r&&globalThis?.document?.body;return o?Z.default.createPortal((0,f.jsx)(I.Primitive.div,{...n,ref:t}),o):null});G.displayName="Portal";var Q=e=>{var t;let a,n,{present:r,children:s}=e,o=function(e){var t,a;let[n,r]=p.useState(),s=p.useRef({}),o=p.useRef(e),i=p.useRef("none"),[l,d]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},p.useReducer((e,t)=>a[e][t]??e,t));return p.useEffect(()=>{let e=ee(s.current);i.current="mounted"===l?e:"none"},[l]),O(()=>{let t=s.current,a=o.current;if(a!==e){let n=i.current,r=ee(t);e?d("MOUNT"):"none"===r||t?.display==="none"?d("UNMOUNT"):a&&n!==r?d("ANIMATION_OUT"):d("UNMOUNT"),o.current=e}},[e,d]),O(()=>{if(n){let e,t=n.ownerDocument.defaultView??window,a=a=>{let r=ee(s.current).includes(a.animationName);if(a.target===n&&r&&(d("ANIMATION_END"),!o.current)){let a=n.style.animationFillMode;n.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===n.style.animationFillMode&&(n.style.animationFillMode=a)})}},r=e=>{e.target===n&&(i.current=ee(s.current))};return n.addEventListener("animationstart",r),n.addEventListener("animationcancel",a),n.addEventListener("animationend",a),()=>{t.clearTimeout(e),n.removeEventListener("animationstart",r),n.removeEventListener("animationcancel",a),n.removeEventListener("animationend",a)}}d("ANIMATION_END")},[n,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(e=>{e&&(s.current=getComputedStyle(e)),r(e)},[])}}(r),i="function"==typeof s?s({present:o.isPresent}):p.Children.only(s),l=(0,T.useComposedRefs)(o.ref,(t=i,(n=(a=Object.getOwnPropertyDescriptor(t.props,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?t.ref:(n=(a=Object.getOwnPropertyDescriptor(t,"ref")?.get)&&"isReactWarning"in a&&a.isReactWarning)?t.props.ref:t.props.ref||t.ref));return"function"==typeof s||o.isPresent?p.cloneElement(i,{ref:l}):null};function ee(e){return e?.animationName||"none"}Q.displayName="Presence";var et=0;function ea(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var en=e.i(90571),er="right-scroll-bar-position",es="width-before-scroll-bar";function eo(e,t){return"function"==typeof e?e(t):e&&(e.current=t),e}var ei="undefined"!=typeof window?p.useLayoutEffect:p.useEffect,el=new WeakMap,ed=(void 0===r&&(r={}),(void 0===s&&(s=function(e){return e}),o=[],i=!1,l={read:function(){if(i)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return o.length?o[o.length-1]:null},useMedium:function(e){var t=s(e,i);return o.push(t),function(){o=o.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(i=!0;o.length;){var t=o;o=[],t.forEach(e)}o={push:function(t){return e(t)},filter:function(){return o}}},assignMedium:function(e){i=!0;var t=[];if(o.length){var a=o;o=[],a.forEach(e),t=o}var n=function(){var a=t;t=[],a.forEach(e)},r=function(){return Promise.resolve().then(n)};r(),o={push:function(e){t.push(e),r()},filter:function(e){return t=t.filter(e),o}}}}).options=(0,en.__assign)({async:!0,ssr:!1},r),l),ec=function(){},eu=p.forwardRef(function(e,t){var a,n,r,s,o=p.useRef(null),i=p.useState({onScrollCapture:ec,onWheelCapture:ec,onTouchMoveCapture:ec}),l=i[0],d=i[1],c=e.forwardProps,u=e.children,m=e.className,f=e.removeScrollBar,h=e.enabled,g=e.shards,x=e.sideCar,v=e.noRelative,y=e.noIsolation,b=e.inert,w=e.allowPinchZoom,j=e.as,N=e.gapMode,C=(0,en.__rest)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=(a=[o,t],n=function(e){return a.forEach(function(t){return eo(t,e)})},(r=(0,p.useState)(function(){return{value:null,callback:n,facade:{get current(){return r.value},set current(value){var e=r.value;e!==value&&(r.value=value,r.callback(value,e))}}}})[0]).callback=n,s=r.facade,ei(function(){var e=el.get(s);if(e){var t=new Set(e),n=new Set(a),r=s.current;t.forEach(function(e){n.has(e)||eo(e,null)}),n.forEach(function(e){t.has(e)||eo(e,r)})}el.set(s,a)},[a]),s),S=(0,en.__assign)((0,en.__assign)({},C),l);return p.createElement(p.Fragment,null,h&&p.createElement(x,{sideCar:ed,removeScrollBar:f,shards:g,noRelative:v,noIsolation:y,inert:b,setCallbacks:d,allowPinchZoom:!!w,lockRef:o,gapMode:N}),c?p.cloneElement(p.Children.only(u),(0,en.__assign)((0,en.__assign)({},S),{ref:k})):p.createElement(void 0===j?"div":j,(0,en.__assign)({},S,{className:m,ref:k}),u))});eu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},eu.classNames={fullWidth:es,zeroRight:er};var em=function(e){var t=e.sideCar,a=(0,en.__rest)(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw Error("Sidecar medium not found");return p.createElement(n,(0,en.__assign)({},a))};em.isSideCarExport=!0;var ef=function(){var e=0,t=null;return{add:function(a){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=m||("undefined"!=typeof __webpack_nonce__?__webpack_nonce__:void 0);return t&&e.setAttribute("nonce",t),e}())){var n,r;(n=t).styleSheet?n.styleSheet.cssText=a:n.appendChild(document.createTextNode(a)),r=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(r)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},ep=function(){var e=ef();return function(t,a){p.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&a])}},eh=function(){var e=ep();return function(t){return e(t.styles,t.dynamic),null}},eg={left:0,top:0,right:0,gap:0},ex=function(e){return parseInt(e||"",10)||0},ev=function(e){var t=window.getComputedStyle(document.body),a=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],r=t["padding"===e?"paddingRight":"marginRight"];return[ex(a),ex(n),ex(r)]},ey=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return eg;var t=ev(e),a=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-a+t[2]-t[0])}},eb=eh(),ew="data-scroll-locked",ej=function(e,t,a,n){var r=e.left,s=e.top,o=e.right,i=e.gap;return void 0===a&&(a="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(i,"px ").concat(n,";\n  }\n  body[").concat(ew,"] {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===a&&"\n    padding-left: ".concat(r,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(o,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(i,"px ").concat(n,";\n    "),"padding"===a&&"padding-right: ".concat(i,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(er," {\n    right: ").concat(i,"px ").concat(n,";\n  }\n  \n  .").concat(es," {\n    margin-right: ").concat(i,"px ").concat(n,";\n  }\n  \n  .").concat(er," .").concat(er," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(es," .").concat(es," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body[").concat(ew,"] {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(i,"px;\n  }\n")},eN=function(){var e=parseInt(document.body.getAttribute(ew)||"0",10);return isFinite(e)?e:0},eC=function(){p.useEffect(function(){return document.body.setAttribute(ew,(eN()+1).toString()),function(){var e=eN()-1;e<=0?document.body.removeAttribute(ew):document.body.setAttribute(ew,e.toString())}},[])},ek=function(e){var t=e.noRelative,a=e.noImportant,n=e.gapMode,r=void 0===n?"margin":n;eC();var s=p.useMemo(function(){return ey(r)},[r]);return p.createElement(eb,{styles:ej(s,!t,r,a?"":"!important")})},eS=!1;if("undefined"!=typeof window)try{var eE=Object.defineProperty({},"passive",{get:function(){return eS=!0,!0}});window.addEventListener("test",eE,eE),window.removeEventListener("test",eE,eE)}catch(e){eS=!1}var e_=!!eS&&{passive:!1},eT=function(e,t){if(!(e instanceof Element))return!1;var a=window.getComputedStyle(e);return"hidden"!==a[t]&&(a.overflowY!==a.overflowX||"TEXTAREA"===e.tagName||"visible"!==a[t])},eM=function(e,t){var a=t.ownerDocument,n=t;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),eO(e,n)){var r=eR(e,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==a.body)return!1},eO=function(e,t){return"v"===e?eT(t,"overflowY"):eT(t,"overflowX")},eR=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},eL=function(e,t,a,n,r){var s,o=(s=window.getComputedStyle(t).direction,"h"===e&&"rtl"===s?-1:1),i=o*n,l=a.target,d=t.contains(l),c=!1,u=i>0,m=0,f=0;do{if(!l)break;var p=eR(e,l),h=p[0],g=p[1]-p[2]-o*h;(h||g)&&eO(e,l)&&(m+=g,f+=h);var x=l.parentNode;l=x&&x.nodeType===Node.DOCUMENT_FRAGMENT_NODE?x.host:x}while(!d&&l!==document.body||d&&(t.contains(l)||t===l))return u&&(r&&1>Math.abs(m)||!r&&i>m)?c=!0:!u&&(r&&1>Math.abs(f)||!r&&-i>f)&&(c=!0),c},eA=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},eP=function(e){return[e.deltaX,e.deltaY]},eI=function(e){return e&&"current"in e?e.current:e},eD=0,eB=[];let eF=(d=function(e){var t=p.useRef([]),a=p.useRef([0,0]),n=p.useRef(),r=p.useState(eD++)[0],s=p.useState(eh)[0],o=p.useRef(e);p.useEffect(function(){o.current=e},[e]),p.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(r));var t=(0,en.__spreadArray)([e.lockRef.current],(e.shards||[]).map(eI),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(r))})}}},[e.inert,e.lockRef.current,e.shards]);var i=p.useCallback(function(e,t){if("touches"in e&&2===e.touches.length||"wheel"===e.type&&e.ctrlKey)return!o.current.allowPinchZoom;var r,s=eA(e),i=a.current,l="deltaX"in e?e.deltaX:i[0]-s[0],d="deltaY"in e?e.deltaY:i[1]-s[1],c=e.target,u=Math.abs(l)>Math.abs(d)?"h":"v";if("touches"in e&&"h"===u&&"range"===c.type)return!1;var m=window.getSelection(),f=m&&m.anchorNode;if(f&&(f===c||f.contains(c)))return!1;var p=eM(u,c);if(!p)return!0;if(p?r=u:(r="v"===u?"h":"v",p=eM(u,c)),!p)return!1;if(!n.current&&"changedTouches"in e&&(l||d)&&(n.current=r),!r)return!0;var h=n.current||r;return eL(h,t,e,"h"===h?l:d,!0)},[]),l=p.useCallback(function(e){if(eB.length&&eB[eB.length-1]===s){var a="deltaY"in e?eP(e):eA(e),n=t.current.filter(function(t){var n;return t.name===e.type&&(t.target===e.target||e.target===t.shadowParent)&&(n=t.delta,n[0]===a[0]&&n[1]===a[1])})[0];if(n&&n.should){e.cancelable&&e.preventDefault();return}if(!n){var r=(o.current.shards||[]).map(eI).filter(Boolean).filter(function(t){return t.contains(e.target)});(r.length>0?i(e,r[0]):!o.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),d=p.useCallback(function(e,a,n,r){var s={name:e,delta:a,target:n,should:r,shadowParent:function(e){for(var t=null;null!==e;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}(n)};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),c=p.useCallback(function(e){a.current=eA(e),n.current=void 0},[]),u=p.useCallback(function(t){d(t.type,eP(t),t.target,i(t,e.lockRef.current))},[]),m=p.useCallback(function(t){d(t.type,eA(t),t.target,i(t,e.lockRef.current))},[]);p.useEffect(function(){return eB.push(s),e.setCallbacks({onScrollCapture:u,onWheelCapture:u,onTouchMoveCapture:m}),document.addEventListener("wheel",l,e_),document.addEventListener("touchmove",l,e_),document.addEventListener("touchstart",c,e_),function(){eB=eB.filter(function(e){return e!==s}),document.removeEventListener("wheel",l,e_),document.removeEventListener("touchmove",l,e_),document.removeEventListener("touchstart",c,e_)}},[]);var f=e.removeScrollBar,h=e.inert;return p.createElement(p.Fragment,null,h?p.createElement(s,{styles:"\n  .block-interactivity-".concat(r," {pointer-events: none;}\n  .allow-interactivity-").concat(r," {pointer-events: all;}\n")}):null,f?p.createElement(ek,{noRelative:e.noRelative,gapMode:e.gapMode}):null)},ed.useMedium(d),em);var e$=p.forwardRef(function(e,t){return p.createElement(eu,(0,en.__assign)({},e,{ref:t,sideCar:eF}))});e$.classNames=eu.classNames;var eq=new WeakMap,ez=new WeakMap,eU={},eH=0,eW=function(e){return e&&(e.host||eW(e.parentNode))},eV=function(e,t,a,n){var r=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var a=eW(e);return a&&t.contains(a)?a:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return!!e});eU[a]||(eU[a]=new WeakMap);var s=eU[a],o=[],i=new Set,l=new Set(r),d=function(e){!e||i.has(e)||(i.add(e),d(e.parentNode))};r.forEach(d);var c=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(i.has(e))c(e);else try{var t=e.getAttribute(n),r=null!==t&&"false"!==t,l=(eq.get(e)||0)+1,d=(s.get(e)||0)+1;eq.set(e,l),s.set(e,d),o.push(e),1===l&&r&&ez.set(e,!0),1===d&&e.setAttribute(a,"true"),r||e.setAttribute(n,"true")}catch(t){console.error("aria-hidden: cannot operate on ",e,t)}})};return c(t),i.clear(),eH++,function(){o.forEach(function(e){var t=eq.get(e)-1,r=s.get(e)-1;eq.set(e,t),s.set(e,r),t||(ez.has(e)||e.removeAttribute(n),ez.delete(e)),r||e.removeAttribute(a)}),--eH||(eq=new WeakMap,eq=new WeakMap,ez=new WeakMap,eU={})}},eJ=function(e,t,a){void 0===a&&(a="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),r=t||("undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body);return r?(n.push.apply(n,Array.from(r.querySelectorAll("[aria-live], script"))),eV(n,r,a,"aria-hidden")):function(){return null}},eY=e.i(91918),eK="Dialog",[eX,eZ]=_(eK),[eG,eQ]=eX(eK),e0=e=>{let{__scopeDialog:t,children:a,open:n,defaultOpen:r,onOpenChange:s,modal:o=!0}=e,i=p.useRef(null),l=p.useRef(null),[d=!1,c]=function({prop:e,defaultProp:t,onChange:a=()=>{}}){let[n,r]=function({defaultProp:e,onChange:t}){let a=p.useState(e),[n]=a,r=p.useRef(n),s=P(t);return p.useEffect(()=>{r.current!==n&&(s(n),r.current=n)},[n,r,s]),a}({defaultProp:t,onChange:a}),s=void 0!==e,o=s?e:n,i=P(a);return[o,p.useCallback(t=>{if(s){let a="function"==typeof t?t(e):t;a!==e&&i(a)}else r(t)},[s,e,r,i])]}({prop:n,defaultProp:r,onChange:s});return(0,f.jsx)(eG,{scope:t,triggerRef:i,contentRef:l,contentId:A(),titleId:A(),descriptionId:A(),open:d,onOpenChange:c,onOpenToggle:p.useCallback(()=>c(e=>!e),[c]),modal:o,children:a})};e0.displayName=eK;var e1="DialogTrigger",e2=p.forwardRef((e,t)=>{let{__scopeDialog:a,...n}=e,r=eQ(e1,a),s=(0,T.useComposedRefs)(t,r.triggerRef);return(0,f.jsx)(I.Primitive.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":tu(r.open),...n,ref:s,onClick:M(e.onClick,r.onOpenToggle)})});e2.displayName=e1;var e5="DialogPortal",[e4,e3]=eX(e5,{forceMount:void 0}),e7=e=>{let{__scopeDialog:t,forceMount:a,children:n,container:r}=e,s=eQ(e5,t);return(0,f.jsx)(e4,{scope:t,forceMount:a,children:p.Children.map(n,e=>(0,f.jsx)(Q,{present:a||s.open,children:(0,f.jsx)(G,{asChild:!0,container:r,children:e})}))})};e7.displayName=e5;var e6="DialogOverlay",e8=p.forwardRef((e,t)=>{let a=e3(e6,e.__scopeDialog),{forceMount:n=a.forceMount,...r}=e,s=eQ(e6,e.__scopeDialog);return s.modal?(0,f.jsx)(Q,{present:n||s.open,children:(0,f.jsx)(e9,{...r,ref:t})}):null});e8.displayName=e6;var e9=p.forwardRef((e,t)=>{let{__scopeDialog:a,...n}=e,r=eQ(e6,a);return(0,f.jsx)(e$,{as:eY.Slot,allowPinchZoom:!0,shards:[r.contentRef],children:(0,f.jsx)(I.Primitive.div,{"data-state":tu(r.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),te="DialogContent",tt=p.forwardRef((e,t)=>{let a=e3(te,e.__scopeDialog),{forceMount:n=a.forceMount,...r}=e,s=eQ(te,e.__scopeDialog);return(0,f.jsx)(Q,{present:n||s.open,children:s.modal?(0,f.jsx)(ta,{...r,ref:t}):(0,f.jsx)(tn,{...r,ref:t})})});tt.displayName=te;var ta=p.forwardRef((e,t)=>{let a=eQ(te,e.__scopeDialog),n=p.useRef(null),r=(0,T.useComposedRefs)(t,a.contentRef,n);return p.useEffect(()=>{let e=n.current;if(e)return eJ(e)},[]),(0,f.jsx)(tr,{...e,ref:r,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:M(e.onCloseAutoFocus,e=>{e.preventDefault(),a.triggerRef.current?.focus()}),onPointerDownOutside:M(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,a=0===t.button&&!0===t.ctrlKey;(2===t.button||a)&&e.preventDefault()}),onFocusOutside:M(e.onFocusOutside,e=>e.preventDefault())})}),tn=p.forwardRef((e,t)=>{let a=eQ(te,e.__scopeDialog),n=p.useRef(!1),r=p.useRef(!1);return(0,f.jsx)(tr,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{e.onCloseAutoFocus?.(t),t.defaultPrevented||(n.current||a.triggerRef.current?.focus(),t.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:t=>{e.onInteractOutside?.(t),t.defaultPrevented||(n.current=!0,"pointerdown"===t.detail.originalEvent.type&&(r.current=!0));let s=t.target;a.triggerRef.current?.contains(s)&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&r.current&&t.preventDefault()}})}),tr=p.forwardRef((e,t)=>{let{__scopeDialog:a,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:s,...o}=e,i=eQ(te,a),l=p.useRef(null),d=(0,T.useComposedRefs)(t,l);return p.useEffect(()=>{let e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??ea()),document.body.insertAdjacentElement("beforeend",e[1]??ea()),et++,()=>{1===et&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),et--}},[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(W,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:s,children:(0,f.jsx)(F,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":tu(i.open),...o,ref:d,onDismiss:()=>i.onOpenChange(!1)})}),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(th,{titleId:i.titleId}),(0,f.jsx)(tg,{contentRef:l,descriptionId:i.descriptionId})]})]})}),ts="DialogTitle",to=p.forwardRef((e,t)=>{let{__scopeDialog:a,...n}=e,r=eQ(ts,a);return(0,f.jsx)(I.Primitive.h2,{id:r.titleId,...n,ref:t})});to.displayName=ts;var ti="DialogDescription",tl=p.forwardRef((e,t)=>{let{__scopeDialog:a,...n}=e,r=eQ(ti,a);return(0,f.jsx)(I.Primitive.p,{id:r.descriptionId,...n,ref:t})});tl.displayName=ti;var td="DialogClose",tc=p.forwardRef((e,t)=>{let{__scopeDialog:a,...n}=e,r=eQ(td,a);return(0,f.jsx)(I.Primitive.button,{type:"button",...n,ref:t,onClick:M(e.onClick,()=>r.onOpenChange(!1))})});function tu(e){return e?"open":"closed"}tc.displayName=td;var tm="DialogTitleWarning",[tf,tp]=(c={contentName:te,titleName:ts,docsSlug:"dialog"},t=p.createContext(c),(a=e=>{let{children:a,...n}=e,r=p.useMemo(()=>n,Object.values(n));return(0,f.jsx)(t.Provider,{value:r,children:a})}).displayName=tm+"Provider",[a,function(e){let a=p.useContext(t);if(a)return a;if(void 0!==c)return c;throw Error(`\`${e}\` must be used within \`${tm}\``)}]),th=({titleId:e})=>{let t=tp(tm),a=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return p.useEffect(()=>{e&&(document.getElementById(e)||console.error(a))},[a,e]),null},tg=({contentRef:e,descriptionId:t})=>{let a=tp("DialogDescriptionWarning"),n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${a.contentName}}.`;return p.useEffect(()=>{let a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},tx="AlertDialog",[tv,ty]=_(tx,[eZ]),tb=eZ(),tw=e=>{let{__scopeAlertDialog:t,...a}=e,n=tb(t);return(0,f.jsx)(e0,{...n,...a,modal:!0})};tw.displayName=tx;var tj=p.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,r=tb(a);return(0,f.jsx)(e2,{...r,...n,ref:t})});tj.displayName="AlertDialogTrigger";var tN=e=>{let{__scopeAlertDialog:t,...a}=e,n=tb(t);return(0,f.jsx)(e7,{...n,...a})};tN.displayName="AlertDialogPortal";var tC=p.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,r=tb(a);return(0,f.jsx)(e8,{...r,...n,ref:t})});tC.displayName="AlertDialogOverlay";var tk="AlertDialogContent",[tS,tE]=tv(tk),t_=p.forwardRef((e,t)=>{let{__scopeAlertDialog:a,children:n,...r}=e,s=tb(a),o=p.useRef(null),i=(0,T.useComposedRefs)(t,o),l=p.useRef(null);return(0,f.jsx)(tf,{contentName:tk,titleName:tT,docsSlug:"alert-dialog",children:(0,f.jsx)(tS,{scope:a,cancelRef:l,children:(0,f.jsxs)(tt,{role:"alertdialog",...s,...r,ref:i,onOpenAutoFocus:M(r.onOpenAutoFocus,e=>{e.preventDefault(),l.current?.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,f.jsx)(eY.Slottable,{children:n}),(0,f.jsx)(tI,{contentRef:o})]})})})});t_.displayName=tk;var tT="AlertDialogTitle",tM=p.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,r=tb(a);return(0,f.jsx)(to,{...r,...n,ref:t})});tM.displayName=tT;var tO="AlertDialogDescription",tR=p.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,r=tb(a);return(0,f.jsx)(tl,{...r,...n,ref:t})});tR.displayName=tO;var tL=p.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,r=tb(a);return(0,f.jsx)(tc,{...r,...n,ref:t})});tL.displayName="AlertDialogAction";var tA="AlertDialogCancel",tP=p.forwardRef((e,t)=>{let{__scopeAlertDialog:a,...n}=e,{cancelRef:r}=tE(tA,a),s=tb(a),o=(0,T.useComposedRefs)(t,r);return(0,f.jsx)(tc,{...s,...n,ref:o})});tP.displayName=tA;var tI=({contentRef:e})=>{let t=`\`${tk}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${tk}\` by passing a \`${tO}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${tk}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return p.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null};function tD({...e}){return(0,f.jsx)(tw,{"data-slot":"alert-dialog",...e})}function tB({...e}){return(0,f.jsx)(tj,{"data-slot":"alert-dialog-trigger",...e})}function tF({...e}){return(0,f.jsx)(tN,{"data-slot":"alert-dialog-portal",...e})}function t$({className:e,...t}){return(0,f.jsx)(tC,{"data-slot":"alert-dialog-overlay",className:(0,h.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function tq({className:e,...t}){return(0,f.jsxs)(tF,{children:[(0,f.jsx)(t$,{}),(0,f.jsx)(t_,{"data-slot":"alert-dialog-content",className:(0,h.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function tz({className:e,...t}){return(0,f.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,h.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function tU({className:e,...t}){return(0,f.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,h.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function tH({className:e,...t}){return(0,f.jsx)(tM,{"data-slot":"alert-dialog-title",className:(0,h.cn)("text-lg font-semibold",e),...t})}function tW({className:e,...t}){return(0,f.jsx)(tR,{"data-slot":"alert-dialog-description",className:(0,h.cn)("text-muted-foreground text-sm",e),...t})}function tV({className:e,...t}){return(0,f.jsx)(tL,{className:(0,h.cn)((0,v.buttonVariants)(),e),...t})}function tJ({className:e,...t}){return(0,f.jsx)(tP,{className:(0,h.cn)((0,v.buttonVariants)({variant:"outline"}),e),...t})}let tY=(0,y.default)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),tK=(0,y.default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),tX=(0,y.default)("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),tZ=(0,y.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),tG=(0,y.default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),tQ=(0,y.default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),t0=(0,y.default)("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),t1=(0,y.default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),t2=(0,y.default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),t5=(0,y.default)("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]),t4=(0,y.default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),t3=(0,y.default)("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),t7=(0,y.default)("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),t6=(0,y.default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),t8=(0,y.default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),t9=["Hey! Quick question — are you open to an offer on your property?","Just making sure this reached the right person.","No rush — just curious if you'd consider selling?","I can usually give a rough estimate in under 60 seconds.","Have you gotten any offers recently?","Still thinking about selling the place?","Hey, just checking back in — any chance you'd consider an offer?","We've got a few buyers looking in your area.","We're short on properties right now.","We're locking in offers for this month.","If you did sell, what price would make you consider it?","Should I close your file or keep you on the list?"];function ae({lead:e}){let[t,a]=(0,p.useState)([]),[n,r]=(0,p.useState)(!0);return((0,p.useEffect)(()=>{!async function(){try{let t=await fetch(`/api/leads/${e.id}/followup-sequences`),n=await t.json();a(n.sequences||[])}catch{}r(!1)}()},[e.id]),n)?(0,f.jsx)("div",{className:"text-gray-400",children:"Loading follow-up sequence..."}):0===t.length?(0,f.jsx)("div",{className:"text-gray-400 text-sm",children:"No follow-up sequence scheduled"}):(0,f.jsxs)("div",{className:"space-y-3",children:[(0,f.jsx)("h4",{className:"font-semibold text-foreground",children:"Follow-Up Sequence"}),(0,f.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:t.map(e=>{let t=t9[e.sequence_number-1],a=new Date(e.scheduled_for),n="sent"===e.status?"bg-green-900 text-green-200":"skipped"===e.status?"bg-gray-800 text-gray-300":"bg-blue-900 text-blue-200";return(0,f.jsxs)("div",{className:"bg-background border border-border rounded p-3 text-sm",children:[(0,f.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-2",children:[(0,f.jsxs)("span",{className:"font-medium",children:["Message ",e.sequence_number]}),(0,f.jsx)("span",{className:`px-2 py-1 rounded text-xs font-medium ${n}`,children:e.status})]}),(0,f.jsx)("p",{className:"text-gray-300 text-xs mb-2",children:t}),(0,f.jsx)("div",{className:"text-xs text-gray-500",children:"sent"===e.status?`Sent: ${new Date(e.sent_at).toLocaleDateString()}`:`Scheduled: ${a.toLocaleDateString()}`})]},e.id)})})]})}var at=e.i(20755),aa=Array(12).fill(0),an=({visible:e,className:t})=>p.default.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},p.default.createElement("div",{className:"sonner-spinner"},aa.map((e,t)=>p.default.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${t}`})))),ar=p.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},p.default.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),as=p.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},p.default.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ao=p.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},p.default.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),ai=p.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},p.default.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),al=p.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},p.default.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.default.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),ad=1,ac=new class{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);this.subscribers.splice(t,1)}),this.publish=e=>{this.subscribers.forEach(t=>t(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var t;let{message:a,...n}=e,r="number"==typeof(null==e?void 0:e.id)||(null==(t=e.id)?void 0:t.length)>0?e.id:ad++,s=this.toasts.find(e=>e.id===r),o=void 0===e.dismissible||e.dismissible;return this.dismissedToasts.has(r)&&this.dismissedToasts.delete(r),s?this.toasts=this.toasts.map(t=>t.id===r?(this.publish({...t,...e,id:r,title:a}),{...t,...e,id:r,dismissible:o,title:a}):t):this.addToast({title:a,...n,dismissible:o,id:r}),r},this.dismiss=e=>(this.dismissedToasts.add(e),e||this.toasts.forEach(e=>{this.subscribers.forEach(t=>t({id:e.id,dismiss:!0}))}),this.subscribers.forEach(t=>t({id:e,dismiss:!0})),e),this.message=(e,t)=>this.create({...t,message:e}),this.error=(e,t)=>this.create({...t,message:e,type:"error"}),this.success=(e,t)=>this.create({...t,type:"success",message:e}),this.info=(e,t)=>this.create({...t,type:"info",message:e}),this.warning=(e,t)=>this.create({...t,type:"warning",message:e}),this.loading=(e,t)=>this.create({...t,type:"loading",message:e}),this.promise=(e,t)=>{let a;if(!t)return;void 0!==t.loading&&(a=this.create({...t,promise:e,type:"loading",message:t.loading,description:"function"!=typeof t.description?t.description:void 0}));let n=e instanceof Promise?e:e(),r=void 0!==a,s,o=n.then(async e=>{if(s=["resolve",e],p.default.isValidElement(e))r=!1,this.create({id:a,type:"default",message:e});else if(au(e)&&!e.ok){r=!1;let n="function"==typeof t.error?await t.error(`HTTP error! status: ${e.status}`):t.error,s="function"==typeof t.description?await t.description(`HTTP error! status: ${e.status}`):t.description;this.create({id:a,type:"error",message:n,description:s})}else if(void 0!==t.success){r=!1;let n="function"==typeof t.success?await t.success(e):t.success,s="function"==typeof t.description?await t.description(e):t.description;this.create({id:a,type:"success",message:n,description:s})}}).catch(async e=>{if(s=["reject",e],void 0!==t.error){r=!1;let n="function"==typeof t.error?await t.error(e):t.error,s="function"==typeof t.description?await t.description(e):t.description;this.create({id:a,type:"error",message:n,description:s})}}).finally(()=>{var e;r&&(this.dismiss(a),a=void 0),null==(e=t.finally)||e.call(t)}),i=()=>new Promise((e,t)=>o.then(()=>"reject"===s[0]?t(s[1]):e(s[1])).catch(t));return"string"!=typeof a&&"number"!=typeof a?{unwrap:i}:Object.assign(a,{unwrap:i})},this.custom=(e,t)=>{let a=(null==t?void 0:t.id)||ad++;return this.create({jsx:e(a),id:a,...t}),a},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},au=e=>e&&"object"==typeof e&&"ok"in e&&"boolean"==typeof e.ok&&"status"in e&&"number"==typeof e.status,am=Object.assign((e,t)=>{let a=(null==t?void 0:t.id)||ad++;return ac.addToast({title:e,...t,id:a}),a},{success:ac.success,info:ac.info,warning:ac.warning,error:ac.error,custom:ac.custom,message:ac.message,promise:ac.promise,dismiss:ac.dismiss,loading:ac.loading},{getHistory:()=>ac.toasts,getToasts:()=>ac.getActiveToasts()});function af(e){return void 0!==e.label}function ap(...e){return e.filter(Boolean).join(" ")}!function(e,{insertAt:t}={}){if(!e||"undefined"==typeof document)return;let a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&a.firstChild?a.insertBefore(n,a.firstChild):a.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);var ah=e=>{var t,a,n,r,s,o,i,l,d,c,u,m,f,h;let{invert:g,toast:x,unstyled:v,interacting:y,setHeights:b,visibleToasts:w,heights:j,index:N,toasts:C,expanded:k,removeToast:S,defaultRichColors:E,closeButton:_,style:T,cancelButtonStyle:M,actionButtonStyle:O,className:R="",descriptionClassName:L="",duration:A,position:P,gap:I,loadingIcon:D,expandByDefault:B,classNames:F,icons:$,closeButtonAriaLabel:q="Close toast",pauseWhenPageIsHidden:z}=e,[U,H]=p.default.useState(null),[W,V]=p.default.useState(null),[J,Y]=p.default.useState(!1),[K,X]=p.default.useState(!1),[Z,G]=p.default.useState(!1),[Q,ee]=p.default.useState(!1),[et,ea]=p.default.useState(!1),[en,er]=p.default.useState(0),[es,eo]=p.default.useState(0),ei=p.default.useRef(x.duration||A||4e3),el=p.default.useRef(null),ed=p.default.useRef(null),ec=0===N,eu=N+1<=w,em=x.type,ef=!1!==x.dismissible,ep=x.className||"",eh=x.descriptionClassName||"",eg=p.default.useMemo(()=>j.findIndex(e=>e.toastId===x.id)||0,[j,x.id]),ex=p.default.useMemo(()=>{var e;return null!=(e=x.closeButton)?e:_},[x.closeButton,_]),ev=p.default.useMemo(()=>x.duration||A||4e3,[x.duration,A]),ey=p.default.useRef(0),eb=p.default.useRef(0),ew=p.default.useRef(0),ej=p.default.useRef(null),[eN,eC]=P.split("-"),ek=p.default.useMemo(()=>j.reduce((e,t,a)=>a>=eg?e:e+t.height,0),[j,eg]),eS=(()=>{let[e,t]=p.default.useState(document.hidden);return p.default.useEffect(()=>{let e=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",e),()=>window.removeEventListener("visibilitychange",e)},[]),e})(),eE=x.invert||g,e_="loading"===em;eb.current=p.default.useMemo(()=>eg*I+ek,[eg,ek]),p.default.useEffect(()=>{ei.current=ev},[ev]),p.default.useEffect(()=>{Y(!0)},[]),p.default.useEffect(()=>{let e=ed.current;if(e){let t=e.getBoundingClientRect().height;return eo(t),b(e=>[{toastId:x.id,height:t,position:x.position},...e]),()=>b(e=>e.filter(e=>e.toastId!==x.id))}},[b,x.id]),p.default.useLayoutEffect(()=>{if(!J)return;let e=ed.current,t=e.style.height;e.style.height="auto";let a=e.getBoundingClientRect().height;e.style.height=t,eo(a),b(e=>e.find(e=>e.toastId===x.id)?e.map(e=>e.toastId===x.id?{...e,height:a}:e):[{toastId:x.id,height:a,position:x.position},...e])},[J,x.title,x.description,b,x.id]);let eT=p.default.useCallback(()=>{X(!0),er(eb.current),b(e=>e.filter(e=>e.toastId!==x.id)),setTimeout(()=>{S(x)},200)},[x,S,b,eb]);return p.default.useEffect(()=>{let e;if((!x.promise||"loading"!==em)&&x.duration!==1/0&&"loading"!==x.type)return k||y||z&&eS?(()=>{if(ew.current<ey.current){let e=new Date().getTime()-ey.current;ei.current=ei.current-e}ew.current=new Date().getTime()})():ei.current!==1/0&&(ey.current=new Date().getTime(),e=setTimeout(()=>{var e;null==(e=x.onAutoClose)||e.call(x,x),eT()},ei.current)),()=>clearTimeout(e)},[k,y,x,em,z,eS,eT]),p.default.useEffect(()=>{x.delete&&eT()},[eT,x.delete]),p.default.createElement("li",{tabIndex:0,ref:ed,className:ap(R,ep,null==F?void 0:F.toast,null==(t=null==x?void 0:x.classNames)?void 0:t.toast,null==F?void 0:F.default,null==F?void 0:F[em],null==(a=null==x?void 0:x.classNames)?void 0:a[em]),"data-sonner-toast":"","data-rich-colors":null!=(n=x.richColors)?n:E,"data-styled":!(x.jsx||x.unstyled||v),"data-mounted":J,"data-promise":!!x.promise,"data-swiped":et,"data-removed":K,"data-visible":eu,"data-y-position":eN,"data-x-position":eC,"data-index":N,"data-front":ec,"data-swiping":Z,"data-dismissible":ef,"data-type":em,"data-invert":eE,"data-swipe-out":Q,"data-swipe-direction":W,"data-expanded":!!(k||B&&J),style:{"--index":N,"--toasts-before":N,"--z-index":C.length-N,"--offset":`${K?en:eb.current}px`,"--initial-height":B?"auto":`${es}px`,...T,...x.style},onDragEnd:()=>{G(!1),H(null),ej.current=null},onPointerDown:e=>{e_||!ef||(el.current=new Date,er(eb.current),e.target.setPointerCapture(e.pointerId),"BUTTON"!==e.target.tagName&&(G(!0),ej.current={x:e.clientX,y:e.clientY}))},onPointerUp:()=>{var e,t,a,n;if(Q||!ef)return;ej.current=null;let r=Number((null==(e=ed.current)?void 0:e.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),s=Number((null==(t=ed.current)?void 0:t.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),o=new Date().getTime()-(null==(a=el.current)?void 0:a.getTime()),i="x"===U?r:s,l=Math.abs(i)/o;if(Math.abs(i)>=20||l>.11){er(eb.current),null==(n=x.onDismiss)||n.call(x,x),V("x"===U?r>0?"right":"left":s>0?"down":"up"),eT(),ee(!0),ea(!1);return}G(!1),H(null)},onPointerMove:t=>{var a,n,r,s;if(!ej.current||!ef||(null==(a=window.getSelection())?void 0:a.toString().length)>0)return;let o=t.clientY-ej.current.y,i=t.clientX-ej.current.x,l=null!=(n=e.swipeDirections)?n:function(e){let[t,a]=e.split("-"),n=[];return t&&n.push(t),a&&n.push(a),n}(P);!U&&(Math.abs(i)>1||Math.abs(o)>1)&&H(Math.abs(i)>Math.abs(o)?"x":"y");let d={x:0,y:0};"y"===U?(l.includes("top")||l.includes("bottom"))&&(l.includes("top")&&o<0||l.includes("bottom")&&o>0)&&(d.y=o):"x"===U&&(l.includes("left")||l.includes("right"))&&(l.includes("left")&&i<0||l.includes("right")&&i>0)&&(d.x=i),(Math.abs(d.x)>0||Math.abs(d.y)>0)&&ea(!0),null==(r=ed.current)||r.style.setProperty("--swipe-amount-x",`${d.x}px`),null==(s=ed.current)||s.style.setProperty("--swipe-amount-y",`${d.y}px`)}},ex&&!x.jsx?p.default.createElement("button",{"aria-label":q,"data-disabled":e_,"data-close-button":!0,onClick:e_||!ef?()=>{}:()=>{var e;eT(),null==(e=x.onDismiss)||e.call(x,x)},className:ap(null==F?void 0:F.closeButton,null==(r=null==x?void 0:x.classNames)?void 0:r.closeButton)},null!=(s=null==$?void 0:$.close)?s:al):null,x.jsx||(0,p.isValidElement)(x.title)?x.jsx?x.jsx:"function"==typeof x.title?x.title():x.title:p.default.createElement(p.default.Fragment,null,em||x.icon||x.promise?p.default.createElement("div",{"data-icon":"",className:ap(null==F?void 0:F.icon,null==(o=null==x?void 0:x.classNames)?void 0:o.icon)},x.promise||"loading"===x.type&&!x.icon?x.icon||(null!=$&&$.loading?p.default.createElement("div",{className:ap(null==F?void 0:F.loader,null==(m=null==x?void 0:x.classNames)?void 0:m.loader,"sonner-loader"),"data-visible":"loading"===em},$.loading):D?p.default.createElement("div",{className:ap(null==F?void 0:F.loader,null==(f=null==x?void 0:x.classNames)?void 0:f.loader,"sonner-loader"),"data-visible":"loading"===em},D):p.default.createElement(an,{className:ap(null==F?void 0:F.loader,null==(h=null==x?void 0:x.classNames)?void 0:h.loader),visible:"loading"===em})):null,"loading"!==x.type?x.icon||(null==$?void 0:$[em])||(e=>{switch(e){case"success":return ar;case"info":return ao;case"warning":return as;case"error":return ai;default:return null}})(em):null):null,p.default.createElement("div",{"data-content":"",className:ap(null==F?void 0:F.content,null==(i=null==x?void 0:x.classNames)?void 0:i.content)},p.default.createElement("div",{"data-title":"",className:ap(null==F?void 0:F.title,null==(l=null==x?void 0:x.classNames)?void 0:l.title)},"function"==typeof x.title?x.title():x.title),x.description?p.default.createElement("div",{"data-description":"",className:ap(L,eh,null==F?void 0:F.description,null==(d=null==x?void 0:x.classNames)?void 0:d.description)},"function"==typeof x.description?x.description():x.description):null),(0,p.isValidElement)(x.cancel)?x.cancel:x.cancel&&af(x.cancel)?p.default.createElement("button",{"data-button":!0,"data-cancel":!0,style:x.cancelButtonStyle||M,onClick:e=>{var t,a;af(x.cancel)&&ef&&(null==(a=(t=x.cancel).onClick)||a.call(t,e),eT())},className:ap(null==F?void 0:F.cancelButton,null==(c=null==x?void 0:x.classNames)?void 0:c.cancelButton)},x.cancel.label):null,(0,p.isValidElement)(x.action)?x.action:x.action&&af(x.action)?p.default.createElement("button",{"data-button":!0,"data-action":!0,style:x.actionButtonStyle||O,onClick:e=>{var t,a;af(x.action)&&(null==(a=(t=x.action).onClick)||a.call(t,e),e.defaultPrevented||eT())},className:ap(null==F?void 0:F.actionButton,null==(u=null==x?void 0:x.classNames)?void 0:u.actionButton)},x.action.label):null))};function ag(){if("undefined"==typeof window||"undefined"==typeof document)return"ltr";let e=document.documentElement.getAttribute("dir");return"auto"!==e&&e?e:window.getComputedStyle(document.documentElement).direction}function ax({lead:e,onLeadUpdated:t,onLeadDeleted:a}){let[n,r]=(0,p.useState)([]),[s,o]=(0,p.useState)(!1),[i,l]=(0,p.useState)(!1),[d,c]=(0,p.useState)(""),[u,m]=(0,p.useState)(!1),[y,b]=(0,p.useState)(e.arv?.toString()||""),[w,N]=(0,p.useState)(e.repair_estimate?.toString()||""),[C,k]=(0,p.useState)(!1),[_,T]=(0,p.useState)("seller"),[M,O]=(0,p.useState)(!1),[R,L]=(0,p.useState)(!1),[A,P]=(0,p.useState)(!1),[I,D]=(0,p.useState)(""),[B,F]=(0,p.useState)(""),[$,q]=(0,p.useState)([]),[z,U]=(0,p.useState)(!1),[H,W]=(0,p.useState)([]),[V,J]=(0,p.useState)(""),[Y,K]=(0,p.useState)([]),[X,Z]=(0,p.useState)([]),[G,Q]=(0,p.useState)([]),[ee,et]=(0,p.useState)(!1),[ea,en]=(0,p.useState)("");async function er(){o(!0);try{let t=await fetch(`/api/leads/${e.id}/messages`),a=await t.json(),n=Array.isArray(a.messages)?a.messages:[];r(n)}catch{r([])}o(!1)}async function es(){U(!0);try{let t=await fetch(`/api/leads/${e.id}/call-summaries`),a=await t.json();q(Array.isArray(a.summaries)?a.summaries:[])}catch{q([])}U(!1)}async function eo(){try{let t=await fetch(`/api/leads/${e.id}/sequences`),a=await t.json();K(a.enrollments||[]),Z(a.steps||[])}catch{K([]),Z([])}}async function ei(){l(!0);try{let a=await fetch("/api/send-outreach",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id})}),n=await a.json();n.success?(t({...e,conversation_state:"contacted"}),er()):alert(n.error||"Failed to send outreach")}catch(e){console.error("Error sending outreach:",e),alert("Failed to send outreach")}l(!1)}async function el(){if(d.trim()){m(!0);try{let t=await fetch("/api/send-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id,message:d})}),a=await t.json();a.success?(c(""),er()):alert(a.error||"Failed to send message")}catch(e){console.error("Error sending message:",e),alert("Failed to send message")}m(!1)}}async function ed(){let a=Number.parseFloat(y)||null,n=Number.parseFloat(w)||null,r=e.offer_amount;a&&n&&(r=.7*a-n-1e4);try{let s=await fetch(`/api/leads/${e.id}/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({arv:a,repair_estimate:n,offer_amount:r})}),o=await s.json();o.success&&o.lead?t(o.lead):alert(o.error||"Failed to update")}catch(e){alert("Failed to update")}}async function ec(){if(!e.offer_amount)return void alert("Please set an offer amount first");k(!0);try{let a=await fetch("/api/send-contract",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id,role:_})}),n=await a.json();n.success?(t({...e,conversation_state:"contract_sent",contract_link:n.contractLink}),er()):alert(n.error||"Failed to send contract")}catch(e){console.error("Error sending contract:",e),alert("Failed to send contract")}k(!1)}async function eu(){O(!0);try{let a=await fetch("/api/mark-signed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id})}),n=await a.json();n.success?(t({...e,conversation_state:"contract_signed"}),er()):alert(n.error||"Failed to mark as signed")}catch(e){console.error("Error marking signed:",e),alert("Failed to mark as signed")}O(!1)}async function em(){L(!0);try{let t=await fetch("/api/followup/schedule",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id,reason:I,next_action:B})}),a=await t.json();a.success?(P(!0),alert("12-message follow-up sequence scheduled!")):alert(a.error||"Failed to schedule sequence")}catch(e){console.error("Error scheduling sequence:",e),alert("Failed to schedule sequence")}L(!1)}async function ef(){try{let t=await fetch(`/api/leads/${e.id}`,{method:"DELETE"}),n=await t.json();n.success?a(e.id):alert(n.error||"Failed to delete")}catch{alert("Failed to delete")}}(0,p.useEffect)(()=>{er(),b(e.arv?.toString()||""),N(e.repair_estimate?.toString()||"");let t=(0,at.createSupabaseBrowser)(),a=t.channel(`messages_${e.id}`).on("postgres_changes",{event:"*",schema:"public",table:"messages",filter:`lead_id=eq.${e.id}`},()=>{er()}).subscribe();return()=>{t.removeChannel(a)}},[e.id,e.arv,e.repair_estimate]),(0,p.useEffect)(()=>{es()},[e.id]),(0,p.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/sequences"),t=await e.json();W(t.sequences||[])}catch{}})()},[]),(0,p.useEffect)(()=>{eo()},[e.id]);let ep=y&&w?.7*Number.parseFloat(y)-Number.parseFloat(w)-1e4:null,eh=e.offer_amount&&["offer_accepted","qualified"].includes(e.conversation_state),eg="contract_sent"===e.conversation_state;async function ex(a){try{let n=await fetch(`/api/leads/${e.id}/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),r=await n.json();r.success&&r.lead&&t(r.lead)}catch{}}return(0,f.jsxs)("div",{className:"flex h-full flex-col",children:[(0,f.jsxs)("div",{className:"border-b border-border p-6",children:[(0,f.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,f.jsxs)("div",{children:[(0,f.jsx)("h2",{className:"text-xl font-semibold text-foreground",children:e.name}),(0,f.jsx)("p",{className:"text-sm text-muted-foreground",children:e.address}),(0,f.jsx)("p",{className:"text-sm text-muted-foreground",children:e.phone_number})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:["cold_lead"===e.conversation_state&&(0,f.jsxs)(v.Button,{onClick:ei,disabled:i,children:[(0,f.jsx)(tX,{className:"mr-2 h-4 w-4"}),i?"Sending...":"Start Outreach"]}),!A&&(0,f.jsxs)(v.Button,{onClick:em,disabled:R,variant:"outline",children:[(0,f.jsx)(t6,{className:"mr-2 h-4 w-4"}),R?"Scheduling...":"Schedule Sequence"]}),!A&&(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(x.Input,{placeholder:"Reason",value:I,onChange:e=>D(e.target.value)}),(0,f.jsx)(x.Input,{placeholder:"Next action",value:B,onChange:e=>F(e.target.value)})]}),eh&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)("select",{value:_,onChange:e=>T(e.target.value),className:"rounded border border-border bg-background p-2 text-sm",children:[(0,f.jsx)("option",{value:"seller",children:"Seller"}),(0,f.jsx)("option",{value:"buyer",children:"Buyer"})]}),(0,f.jsxs)(v.Button,{onClick:ec,disabled:C,variant:"default",children:[(0,f.jsx)(t5,{className:"mr-2 h-4 w-4"}),C?"Sending...":"Send Contract"]}),(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{try{let a=await fetch("/api/sign/ds/seller",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id})}),n=await a.json();n.success?(t({...e,seller_contract_status:"sent",seller_contract_signed_url:n.signingUrl}),alert("Seller e‑sign link generated")):alert(n.error||"Failed to create e‑sign")}catch{alert("Failed to create e‑sign")}},children:"Send Seller for e‑Sign"})]}),eg&&(0,f.jsxs)(v.Button,{onClick:eu,disabled:M,variant:"outline",className:"border-success text-success hover:bg-success/10 bg-transparent",children:[(0,f.jsx)(t4,{className:"mr-2 h-4 w-4"}),M?"Marking...":"Mark Signed"]}),(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{try{let t=await fetch("/api/closer/handoff",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id})}),a=await t.json();a.success?alert("Handoff initiated"):alert(a.error||"Failed to handoff")}catch{alert("Failed to handoff")}},children:"Handoff to Closer"}),(0,f.jsx)("a",{href:`/deals/summary/${e.id}`,className:"inline-flex items-center",children:(0,f.jsxs)(v.Button,{variant:"outline",children:[(0,f.jsx)(t1,{className:"mr-2 h-4 w-4"}),"Deal Summary PDF"]})}),(0,f.jsxs)(tD,{children:[(0,f.jsx)(tB,{asChild:!0,children:(0,f.jsx)(v.Button,{variant:"destructive",size:"icon",children:(0,f.jsx)(tK,{className:"h-4 w-4"})})}),(0,f.jsxs)(tq,{children:[(0,f.jsxs)(tz,{children:[(0,f.jsx)(tH,{children:"Delete Lead"}),(0,f.jsx)(tW,{children:"Are you sure you want to delete this lead? This action cannot be undone."})]}),(0,f.jsxs)(tU,{children:[(0,f.jsx)(tJ,{children:"Cancel"}),(0,f.jsx)(tV,{onClick:ef,children:"Delete"})]})]})]})]})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4 lg:grid-cols-4",children:[(0,f.jsx)(E.Card,{children:(0,f.jsxs)(E.CardContent,{className:"p-4",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,f.jsx)(tG,{className:"h-4 w-4"}),"Condition"]}),(0,f.jsx)("p",{className:"mt-1 font-medium text-foreground",children:e.property_condition||"Unknown"})]})}),(0,f.jsx)(E.Card,{children:(0,f.jsxs)(E.CardContent,{className:"p-4",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,f.jsx)(t0,{className:"h-4 w-4"}),"Motivation"]}),(0,f.jsx)("p",{className:"mt-1 font-medium text-foreground",children:e.motivation||"Unknown"})]})}),(0,f.jsx)(E.Card,{children:(0,f.jsxs)(E.CardContent,{className:"p-4",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,f.jsx)(tQ,{className:"h-4 w-4"}),"Timeline"]}),(0,f.jsx)("p",{className:"mt-1 font-medium text-foreground",children:e.timeline||"Unknown"})]})}),(0,f.jsx)(E.Card,{children:(0,f.jsxs)(E.CardContent,{className:"p-4",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[(0,f.jsx)(tZ,{className:"h-4 w-4"}),"Price Expectation"]}),(0,f.jsx)("p",{className:"mt-1 font-medium text-foreground",children:e.price_expectation?`$${e.price_expectation.toLocaleString()}`:"Unknown"})]})})]})]}),(0,f.jsxs)("div",{className:"flex flex-1 overflow-hidden",children:[(0,f.jsxs)("div",{className:"flex flex-1 flex-col border-r border-border",children:[(0,f.jsxs)("div",{className:"flex items-center justify-between border-b border-border px-4 py-3",children:[(0,f.jsx)("h3",{className:"font-medium text-foreground",children:"Conversation"}),(0,f.jsx)(v.Button,{variant:"ghost",size:"sm",onClick:er,children:(0,f.jsx)(t2,{className:"h-4 w-4"})})]}),(0,f.jsx)("div",{className:"flex-1 overflow-y-auto p-4",children:s?(0,f.jsx)("p",{className:"text-center text-muted-foreground",children:"Loading..."}):0===n.length?(0,f.jsx)("p",{className:"text-center text-muted-foreground",children:"No messages yet"}):(0,f.jsx)("div",{className:"space-y-3",children:n.map(e=>(0,f.jsxs)("div",{className:(0,h.cn)("max-w-[80%] rounded-lg p-3","outbound"===e.direction?"ml-auto bg-primary text-primary-foreground":"bg-muted text-foreground"),children:[(0,f.jsx)("p",{className:"text-sm",children:e.content}),(0,f.jsxs)("div",{className:"mt-1 flex items-center justify-between",children:[(0,f.jsx)("p",{className:(0,h.cn)("text-xs","outbound"===e.direction?"text-primary-foreground/70":"text-muted-foreground"),children:new Date(e.created_at).toLocaleString()}),function(e){if("outbound"!==e.direction||!e.model_used)return null;let t="gpt-5"===e.model_used;return(0,f.jsx)(g.Badge,{variant:"outline",className:(0,h.cn)("ml-2 text-xs",t?"border-amber-500/50 text-amber-400 bg-amber-500/10":"border-primary/50 text-primary bg-primary/10"),children:t?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(t7,{className:"mr-1 h-3 w-3"}),"GPT-5"]}):(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(t3,{className:"mr-1 h-3 w-3"}),"GPT-5-mini"]})})}(e)]})]},e.id))})}),(0,f.jsx)("div",{className:"border-t border-border p-4",children:(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(S,{placeholder:"Type a manual message...",value:d,onChange:e=>c(e.target.value),className:"min-h-[60px] resize-none"}),(0,f.jsx)(v.Button,{onClick:el,disabled:u||!d.trim(),children:(0,f.jsx)(tY,{className:"h-4 w-4"})})]})})]}),(0,f.jsxs)("div",{className:"w-80 overflow-y-auto p-4 space-y-4",children:[(0,f.jsxs)(E.Card,{children:[(0,f.jsxs)(E.CardHeader,{children:[(0,f.jsx)(E.CardTitle,{className:"text-base",children:"Lead Details"}),(0,f.jsx)(E.CardDescription,{children:"Edit status, tags, score"})]}),(0,f.jsxs)(E.CardContent,{className:"space-y-3",children:[(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(x.Input,{placeholder:"Tags comma-separated",defaultValue:(e.tags||[]).join(","),onBlur:e=>ex({tags:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)})}),(0,f.jsx)(x.Input,{placeholder:"Score 0-5",type:"number",defaultValue:e.score||0,onBlur:e=>ex({score:Number.parseInt(e.target.value)})})]}),(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(x.Input,{placeholder:"Pipeline Status (NEW/WARM/HOT/DEAD/FOLLOW-UP)",defaultValue:e.pipeline_status||"NEW",onBlur:e=>ex({pipeline_status:e.target.value})}),(0,f.jsx)(x.Input,{placeholder:"Notes",defaultValue:e.notes||"",onBlur:e=>ex({notes:e.target.value})}),(0,f.jsx)(x.Input,{placeholder:"State (e.g. TX)",defaultValue:e.state||"",onBlur:e=>ex({state:e.target.value.toUpperCase()})})]}),(0,f.jsx)("div",{className:"mt-2",children:(0,f.jsx)("iframe",{title:"map",className:"h-48 w-full rounded border border-border",src:`https://www.google.com/maps?q=${encodeURIComponent(e.address)}&output=embed`})})]})]}),(0,f.jsxs)(E.Card,{children:[(0,f.jsxs)(E.CardHeader,{children:[(0,f.jsx)(E.CardTitle,{className:"text-base",children:"Offer Calculator"}),(0,f.jsx)(E.CardDescription,{children:"MAO = (ARV x 0.7) - Repairs - Fee"})]}),(0,f.jsxs)(E.CardContent,{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"flex gap-2",children:[(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{try{let a=e.arv,n=e.offer_amount,r=await fetch("/api/property/value/combined",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({address:e.address})}),s=await r.json();if(s.success&&"number"==typeof s.estimate){let r=Math.round(s.estimate);b(String(r));let o=Number.parseFloat(w)||0,i=await fetch(`/api/leads/${e.id}/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({arv:r,offer_amount:.7*r-o-1e4})}),l=await i.json();l.success&&l.lead&&(t(l.lead),am("ARV updated",{action:{label:"Undo",onClick:async()=>{let r=await fetch(`/api/leads/${e.id}/update`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({arv:a,offer_amount:n})}),s=await r.json();s.success&&s.lead&&(t(s.lead),b(a?String(a):""))}}}))}else alert(s.error||"Lookup failed")}catch{alert("Lookup failed")}},children:"Lookup Value"}),(0,f.jsx)(v.Button,{variant:"outline",onClick:()=>N(String(Math.round(.08*Number(y||"0")))),children:"Light"}),(0,f.jsx)(v.Button,{variant:"outline",onClick:()=>N(String(Math.round(.15*Number(y||"0")))),children:"Medium"}),(0,f.jsx)(v.Button,{variant:"outline",onClick:()=>N(String(Math.round(.25*Number(y||"0")))),children:"Heavy"})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"mb-1 block text-sm text-muted-foreground",children:"ARV (After Repair Value)"}),(0,f.jsx)(x.Input,{type:"number",placeholder:"e.g. 200000",value:y,onChange:e=>b(e.target.value)})]}),(0,f.jsxs)("div",{children:[(0,f.jsx)("label",{className:"mb-1 block text-sm text-muted-foreground",children:"Estimated Repairs"}),(0,f.jsx)(x.Input,{type:"number",placeholder:"e.g. 30000",value:w,onChange:e=>N(e.target.value)})]}),null!==ep&&(0,f.jsxs)("div",{className:"rounded-lg bg-primary/10 p-4",children:[(0,f.jsx)("p",{className:"text-sm text-muted-foreground",children:"Calculated MAO"}),(0,f.jsxs)("p",{className:"text-2xl font-bold text-primary",children:["$",ep.toLocaleString()]})]}),(0,f.jsx)(v.Button,{className:"w-full",onClick:ed,disabled:!y||!w,children:"Save & Update Offer"}),e.offer_amount&&(0,f.jsxs)("div",{className:"rounded-lg border border-border p-4",children:[(0,f.jsx)("p",{className:"text-sm text-muted-foreground",children:"Current Offer"}),(0,f.jsxs)("p",{className:"text-xl font-semibold text-foreground",children:["$",e.offer_amount.toLocaleString()]})]})]})]}),(0,f.jsxs)(E.Card,{children:[(0,f.jsxs)(E.CardHeader,{children:[(0,f.jsxs)(E.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,f.jsx)(t6,{className:"h-4 w-4"}),"Follow-Up Sequence"]}),(0,f.jsx)(E.CardDescription,{children:"12-message automated sequence"})]}),(0,f.jsx)(E.CardContent,{children:(0,f.jsx)(ae,{lead:e})})]}),(0,f.jsxs)(E.Card,{children:[(0,f.jsxs)(E.CardHeader,{children:[(0,f.jsxs)(E.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,f.jsx)(t6,{className:"h-4 w-4"}),"Follow-Up Sequences (Builder)"]}),(0,f.jsx)(E.CardDescription,{children:"Enroll in a custom sequence"})]}),(0,f.jsxs)(E.CardContent,{className:"space-y-2",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsxs)("select",{value:V,onChange:e=>J(e.target.value),className:"w-full rounded border border-border bg-background p-2 text-sm",children:[(0,f.jsx)("option",{value:"",children:"Select sequence"}),H.map(e=>(0,f.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{V&&(await fetch(`/api/leads/${e.id}/sequences`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sequenceId:V})}),eo())},children:"Enroll Lead"})]}),Y.length>0&&(0,f.jsxs)("div",{className:"rounded border border-border p-2",children:[(0,f.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Active: ",Y[0].sequence_id," • Step ",Y[0].current_step_index," • Next"," ",Y[0].next_run_at?new Date(Y[0].next_run_at).toLocaleString():"-"]}),(0,f.jsx)("div",{className:"mt-2 space-y-1",children:X.map(e=>(0,f.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Step ",e.step_index," • ",e.status," • ",new Date(e.sent_at).toLocaleString()]},e.id))})]})]})]}),(0,f.jsxs)(E.Card,{children:[(0,f.jsxs)(E.CardHeader,{children:[(0,f.jsxs)(E.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,f.jsx)(j,{className:"h-4 w-4"}),"Call Summaries"]}),(0,f.jsx)(E.CardDescription,{children:"Latest recorded calls"})]}),(0,f.jsxs)(E.CardContent,{className:"space-y-3",children:[z?(0,f.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading…"}):0===$.length?(0,f.jsx)("p",{className:"text-sm text-muted-foreground",children:"No call summaries"}):$.map(e=>(0,f.jsxs)("div",{className:"rounded border border-border p-2",children:[(0,f.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,f.jsx)(g.Badge,{variant:"outline",children:e.sentiment}),(0,f.jsx)(g.Badge,{variant:"outline",children:e.intent}),(0,f.jsxs)("span",{children:["Urgency: ",e.urgency??0]}),"number"==typeof e.motivation&&(0,f.jsxs)("span",{children:["Motivation: ",e.motivation]})]}),e.summary&&(0,f.jsx)("p",{className:"mt-1 text-sm",children:e.summary}),(0,f.jsxs)("div",{className:"mt-1 space-y-1 text-xs text-muted-foreground",children:[e.objections&&(0,f.jsxs)("p",{children:["Objections: ",e.objections]}),e.pain_points&&(0,f.jsxs)("p",{children:["Pain: ",e.pain_points]}),e.decision_maker&&(0,f.jsxs)("p",{children:["Decision Maker: ",e.decision_maker]}),e.next_action&&(0,f.jsxs)("p",{children:["Next: ",e.next_action]})]}),e.recording_url&&(0,f.jsx)("a",{href:e.recording_url,target:"_blank",rel:"noopener noreferrer",className:"mt-1 block text-xs text-primary",children:"Recording"})]},e.id)),(0,f.jsx)(v.Button,{variant:"ghost",onClick:es,children:"Refresh"})]})]}),(0,f.jsxs)(E.Card,{children:[(0,f.jsx)(E.CardHeader,{children:(0,f.jsxs)(E.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,f.jsx)(t7,{className:"h-4 w-4"}),"AI Model Routing"]})}),(0,f.jsxs)(E.CardContent,{className:"space-y-2 text-sm",children:[(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{try{await fetch("/api/conversations/summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id})}),alert("Summary generated")}catch{alert("Failed to generate summary")}},children:"Generate Conversation Summary"}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsxs)(g.Badge,{variant:"outline",className:"border-primary/50 text-primary bg-primary/10",children:[(0,f.jsx)(t3,{className:"mr-1 h-3 w-3"}),"GPT-5-mini"]}),(0,f.jsx)("span",{className:"text-muted-foreground",children:"Qualification"})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsxs)(g.Badge,{variant:"outline",className:"border-amber-500/50 text-amber-400 bg-amber-500/10",children:[(0,f.jsx)(t7,{className:"mr-1 h-3 w-3"}),"GPT-5"]}),(0,f.jsx)("span",{className:"text-muted-foreground",children:"Negotiation"})]}),(0,f.jsx)("p",{className:"mt-2 text-xs text-muted-foreground",children:"Auto-escalates on objections, counteroffers, or agreement signals."})]})]}),e.contract_link&&(0,f.jsxs)(E.Card,{children:[(0,f.jsx)(E.CardHeader,{children:(0,f.jsxs)(E.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,f.jsx)(t5,{className:"h-4 w-4"}),"Contract"]})}),(0,f.jsxs)(E.CardContent,{children:[(0,f.jsxs)("p",{className:"mb-2 text-sm text-muted-foreground",children:["Status: ","contract_signed"===e.conversation_state?"Signed":"Sent"]}),(0,f.jsx)("a",{href:e.contract_link,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-primary hover:underline",children:"View Contract Link"})]})]}),e.notes&&(0,f.jsxs)(E.Card,{children:[(0,f.jsx)(E.CardHeader,{children:(0,f.jsxs)(E.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,f.jsx)(t1,{className:"h-4 w-4"}),"Notes"]})}),(0,f.jsx)(E.CardContent,{children:(0,f.jsx)("p",{className:"whitespace-pre-wrap text-sm text-muted-foreground",children:e.notes})})]}),(0,f.jsxs)(E.Card,{children:[(0,f.jsxs)(E.CardHeader,{children:[(0,f.jsxs)(E.CardTitle,{className:"flex items-center gap-2 text-base",children:[(0,f.jsx)(t8,{className:"h-4 w-4"}),"Disposition"]}),(0,f.jsx)(E.CardDescription,{children:"Match buyers and broadcast"})]}),(0,f.jsxs)(E.CardContent,{className:"space-y-2",children:[(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,f.jsxs)("div",{className:"rounded border border-border p-2",children:[(0,f.jsx)("p",{className:"text-xs text-muted-foreground",children:"Offers Received"}),(0,f.jsx)("p",{className:"text-lg font-semibold text-foreground",children:e.offers_received??0})]}),(0,f.jsxs)("div",{className:"rounded border border-border p-2",children:[(0,f.jsx)("p",{className:"text-xs text-muted-foreground",children:"Best Assignment Fee"}),(0,f.jsx)("p",{className:"text-lg font-semibold text-foreground",children:e.best_assignment_fee?`$${Number(e.best_assignment_fee).toLocaleString()}`:"-"})]})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(v.Button,{variant:"ghost",onClick:async()=>{et(!0);try{let t=await fetch(`/api/dispo/offers?leadId=${e.id}`),a=await t.json();Q(Array.isArray(a.offers)?a.offers:[])}catch{Q([])}et(!1)},children:ee?"Loading...":"Load Buyer Offers"}),G.length>0&&(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{let t=Number.parseInt(prompt("Final assignment fee (USD)")||"");if(!t||t<=0)return alert("Enter a valid fee");let a=await fetch("/api/dispo/close",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id,assignmentFee:t})}),n=await a.json();alert(a.ok?"Deal closed":n.error||"Failed")},children:"Convert to Assignment"})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[G.length>0&&(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{if(!ea)return alert("Select an offer");let t=G.find(e=>e.id===ea);if(!t)return alert("Offer not found");let a=t.amount||Number.parseInt(prompt("Assignment fee (USD)")||"0");if(!a||a<=0)return alert("Enter a valid fee");let n=await fetch("/api/dispo/assign/template",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id,buyerId:t.buyer_id||null,assignmentFee:a})}),r=await n.json();alert(n.ok?"Templated assignment generated and links sent":r.error||"Failed")},children:"Generate Assignment (Template)"}),(0,f.jsx)(v.Button,{variant:"ghost",onClick:async()=>{let t=await fetch(`/api/dispo/assign/link?leadId=${e.id}`),a=await t.json();if(!t.ok||!a.url)return alert(a.error||"No assignment available");window.open(a.url,"_blank")},children:"View Assignment"}),(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{let t=await fetch("/api/dispo/assign/resend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id,target:"seller"})}),a=await t.json();alert(t.ok?"Resent to seller":a.error||"Failed")},children:"Resend to Seller"}),(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{let t=await fetch("/api/dispo/assign/resend",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id,target:"buyer"})}),a=await t.json();alert(t.ok?"Resent to buyer":a.error||"Failed")},children:"Resend to Buyer"})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{try{let t=await fetch(`/api/dispo/matches?leadId=${e.id}`),a=await t.json(),n=Array.isArray(a.matches)?a.matches:[];alert(`Matches: ${n.length}`)}catch{alert("Failed to load matches")}},children:"Find Buyers"}),(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{try{let t=await fetch("/api/dispo/broadcast",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id})}),a=await t.json();alert(t.ok?`Broadcasted to ${a.count}`:a.error||"Failed")}catch{alert("Broadcast failed")}},children:"Broadcast"})]}),G.length>0&&(0,f.jsx)("div",{className:"rounded border border-border",children:(0,f.jsxs)("table",{className:"w-full text-sm",children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{className:"text-muted-foreground",children:[(0,f.jsx)("th",{className:"p-2 text-left",children:"Select"}),(0,f.jsx)("th",{className:"p-2 text-left",children:"Amount"}),(0,f.jsx)("th",{className:"p-2 text-left",children:"From"}),(0,f.jsx)("th",{className:"p-2 text-left",children:"Notes"}),(0,f.jsx)("th",{className:"p-2 text-left",children:"When"})]})}),(0,f.jsx)("tbody",{children:G.map(e=>(0,f.jsxs)("tr",{className:"border-t border-border",children:[(0,f.jsx)("td",{className:"p-2",children:(0,f.jsx)("input",{type:"radio",name:"selectedOffer",checked:ea===e.id,onChange:()=>en(e.id)})}),(0,f.jsx)("td",{className:"p-2",children:"number"==typeof e.amount?`$${Number(e.amount).toLocaleString()}`:"-"}),(0,f.jsx)("td",{className:"p-2",children:e.from_phone||"-"}),(0,f.jsx)("td",{className:"p-2",children:e.notes||"-"}),(0,f.jsx)("td",{className:"p-2",children:e.created_at?new Date(e.created_at).toLocaleString():"-"})]},e.id))})]})}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{try{let t=await fetch("/api/dispo/evaluate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id})}),a=await t.json();if(!t.ok)return alert(a.error||"Failed");"renegotiate"===a.recommendation?alert(`Recommend renegotiate. Suggested offer: $${(a.suggestedOffer||0).toLocaleString()}`):"cancel"===a.recommendation?alert("Recommend cancel during inspection period"):alert("Recommend continue marketing")}catch{alert("Evaluation failed")}},children:"Evaluate Dispo"}),(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{try{let t=prompt("Enter proposed new offer (USD)")||"",a=Number.parseInt(t),n=await fetch("/api/dispo/renegotiate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id,proposed:a})}),r=await n.json();alert(n.ok?`Proposed $${r.newOffer?.toLocaleString()}`:r.error||"Failed")}catch{alert("Renegotiation failed")}},children:"Renegotiate Offer"}),(0,f.jsx)(v.Button,{variant:"destructive",onClick:async()=>{try{if(!confirm("Cancel during inspection period?"))return;let t=await fetch("/api/dispo/cancel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id})}),a=await t.json();alert(t.ok?"Cancelled":a.error||"Failed")}catch{alert("Cancel failed")}},children:"Cancel Contract"}),(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{let t=prompt("Buyer phone (optional)")||"",a=Number.parseInt(prompt("Assignment fee (USD)")||""),n=prompt("Notes (optional)")||"";if(!a||a<=0)return alert("Enter a valid fee");let r=await fetch("/api/dispo/interest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id,phone:t,amount:a,notes:n})}),s=await r.json();alert(r.ok?"Recorded":s.error||"Failed")},children:"Record Buyer Offer"}),G.length>0&&(0,f.jsx)(v.Button,{variant:"outline",onClick:async()=>{if(!ea)return alert("Select an offer");let t=G.find(e=>e.id===ea);if(!t)return alert("Offer not found");let a=t.amount||Number.parseInt(prompt("Assignment fee (USD)")||"0");if(!a||a<=0)return alert("Enter a valid fee");let n=await fetch("/api/dispo/assign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({leadId:e.id,buyerId:t.buyer_id||null,assignmentFee:a})}),r=await n.json();alert(n.ok?"Assignment PDF generated and links sent":r.error||"Failed")},children:"Generate Assignment PDF"})]})]})]})]})]})]})}(0,p.forwardRef)(function(e,t){let{invert:a,position:n="bottom-right",hotkey:r=["altKey","KeyT"],expand:s,closeButton:o,className:i,offset:l,mobileOffset:d,theme:c="light",richColors:u,duration:m,style:f,visibleToasts:h=3,toastOptions:g,dir:x=ag(),gap:v=14,loadingIcon:y,icons:b,containerAriaLabel:w="Notifications",pauseWhenPageIsHidden:j}=e,[N,C]=p.default.useState([]),k=p.default.useMemo(()=>Array.from(new Set([n].concat(N.filter(e=>e.position).map(e=>e.position)))),[N,n]),[S,E]=p.default.useState([]),[_,T]=p.default.useState(!1),[M,O]=p.default.useState(!1),[R,L]=p.default.useState("system"!==c?c:"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),A=p.default.useRef(null),P=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),I=p.default.useRef(null),D=p.default.useRef(!1),B=p.default.useCallback(e=>{C(t=>{var a;return null!=(a=t.find(t=>t.id===e.id))&&a.delete||ac.dismiss(e.id),t.filter(({id:t})=>t!==e.id)})},[]);return p.default.useEffect(()=>ac.subscribe(e=>{e.dismiss?C(t=>t.map(t=>t.id===e.id?{...t,delete:!0}:t)):setTimeout(()=>{Z.default.flushSync(()=>{C(t=>{let a=t.findIndex(t=>t.id===e.id);return -1!==a?[...t.slice(0,a),{...t[a],...e},...t.slice(a+1)]:[e,...t]})})})}),[]),p.default.useEffect(()=>{if("system"!==c)return void L(c);if("system"===c&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?L("dark"):L("light")),"undefined"==typeof window)return;let e=window.matchMedia("(prefers-color-scheme: dark)");try{e.addEventListener("change",({matches:e})=>{L(e?"dark":"light")})}catch(t){e.addListener(({matches:e})=>{try{L(e?"dark":"light")}catch(e){console.error(e)}})}},[c]),p.default.useEffect(()=>{N.length<=1&&T(!1)},[N]),p.default.useEffect(()=>{let e=e=>{var t,a;r.every(t=>e[t]||e.code===t)&&(T(!0),null==(t=A.current)||t.focus()),"Escape"===e.code&&(document.activeElement===A.current||null!=(a=A.current)&&a.contains(document.activeElement))&&T(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[r]),p.default.useEffect(()=>{if(A.current)return()=>{I.current&&(I.current.focus({preventScroll:!0}),I.current=null,D.current=!1)}},[A.current]),p.default.createElement("section",{ref:t,"aria-label":`${w} ${P}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((t,n)=>{var r;let c,[w,C]=t.split("-");return N.length?p.default.createElement("ol",{key:t,dir:"auto"===x?ag():x,tabIndex:-1,ref:A,className:i,"data-sonner-toaster":!0,"data-theme":R,"data-y-position":w,"data-lifted":_&&N.length>1&&!s,"data-x-position":C,style:{"--front-toast-height":`${(null==(r=S[0])?void 0:r.height)||0}px`,"--width":"356px","--gap":`${v}px`,...f,...(c={},[l,d].forEach((e,t)=>{let a=1===t,n=a?"--mobile-offset":"--offset",r=a?"16px":"32px";function s(e){["top","right","bottom","left"].forEach(t=>{c[`${n}-${t}`]="number"==typeof e?`${e}px`:e})}"number"==typeof e||"string"==typeof e?s(e):"object"==typeof e?["top","right","bottom","left"].forEach(t=>{void 0===e[t]?c[`${n}-${t}`]=r:c[`${n}-${t}`]="number"==typeof e[t]?`${e[t]}px`:e[t]}):s(r)}),c)},onBlur:e=>{D.current&&!e.currentTarget.contains(e.relatedTarget)&&(D.current=!1,I.current&&(I.current.focus({preventScroll:!0}),I.current=null))},onFocus:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||D.current||(D.current=!0,I.current=e.relatedTarget)},onMouseEnter:()=>T(!0),onMouseMove:()=>T(!0),onMouseLeave:()=>{M||T(!1)},onDragEnd:()=>T(!1),onPointerDown:e=>{e.target instanceof HTMLElement&&"false"===e.target.dataset.dismissible||O(!0)},onPointerUp:()=>O(!1)},N.filter(e=>!e.position&&0===n||e.position===t).map((n,r)=>{var i,l;return p.default.createElement(ah,{key:n.id,icons:b,index:r,toast:n,defaultRichColors:u,duration:null!=(i=null==g?void 0:g.duration)?i:m,className:null==g?void 0:g.className,descriptionClassName:null==g?void 0:g.descriptionClassName,invert:a,visibleToasts:h,closeButton:null!=(l=null==g?void 0:g.closeButton)?l:o,interacting:M,position:t,style:null==g?void 0:g.style,unstyled:null==g?void 0:g.unstyled,classNames:null==g?void 0:g.classNames,cancelButtonStyle:null==g?void 0:g.cancelButtonStyle,actionButtonStyle:null==g?void 0:g.actionButtonStyle,removeToast:B,toasts:N.filter(e=>e.position==n.position),heights:S.filter(e=>e.position==n.position),setHeights:E,expandByDefault:s,gap:v,loadingIcon:y,expanded:_,pauseWhenPageIsHidden:j,swipeDirections:e.swipeDirections})})):null}))});var av=e.i(95187),ay=(0,av.createServerReference)("40b195f4645de460c3056deb140e1ed4ec5afdf360",av.callServer,void 0,av.findSourceMapURL,"createLead");let ab=(0,y.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function aw({...e}){return(0,f.jsx)(e0,{"data-slot":"dialog",...e})}function aj({...e}){return(0,f.jsx)(e7,{"data-slot":"dialog-portal",...e})}function aN({className:e,...t}){return(0,f.jsx)(e8,{"data-slot":"dialog-overlay",className:(0,h.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t})}function aC({className:e,children:t,showCloseButton:a=!0,...n}){return(0,f.jsxs)(aj,{"data-slot":"dialog-portal",children:[(0,f.jsx)(aN,{}),(0,f.jsxs)(tt,{"data-slot":"dialog-content",className:(0,h.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,a&&(0,f.jsxs)(tc,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,f.jsx)(ab,{}),(0,f.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function ak({className:e,...t}){return(0,f.jsx)("div",{"data-slot":"dialog-header",className:(0,h.cn)("flex flex-col gap-2 text-center sm:text-left",e),...t})}function aS({className:e,...t}){return(0,f.jsx)("div",{"data-slot":"dialog-footer",className:(0,h.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function aE({className:e,...t}){return(0,f.jsx)(to,{"data-slot":"dialog-title",className:(0,h.cn)("text-lg leading-none font-semibold",e),...t})}function a_({className:e,...t}){return(0,f.jsx)(tl,{"data-slot":"dialog-description",className:(0,h.cn)("text-muted-foreground text-sm",e),...t})}var aT=e.i(10708);function aM({open:e,onOpenChange:t,onLeadAdded:a}){let[n,r]=(0,p.useState)(!1),[s,o]=(0,p.useState)({name:"",phone_number:"",address:"",notes:"",arv:"",repair_estimate:""});async function i(e){e.preventDefault(),r(!0);let{lead:n,error:i}=await ay({name:s.name,phone_number:s.phone_number,address:s.address,notes:s.notes||void 0,arv:s.arv?Number.parseFloat(s.arv):void 0,repair_estimate:s.repair_estimate?Number.parseFloat(s.repair_estimate):void 0});n?(a(n),t(!1),o({name:"",phone_number:"",address:"",notes:"",arv:"",repair_estimate:""})):alert(i||"Failed to create lead"),r(!1)}return(0,f.jsx)(aw,{open:e,onOpenChange:t,children:(0,f.jsxs)(aC,{className:"sm:max-w-[500px]",children:[(0,f.jsxs)(ak,{children:[(0,f.jsx)(aE,{children:"Add New Lead"}),(0,f.jsx)(a_,{children:"Enter the property owner's information to add them to your pipeline."})]}),(0,f.jsxs)("form",{onSubmit:i,children:[(0,f.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,f.jsxs)("div",{className:"grid gap-2",children:[(0,f.jsx)(aT.Label,{htmlFor:"name",children:"Name *"}),(0,f.jsx)(x.Input,{id:"name",placeholder:"John Smith",value:s.name,onChange:e=>o(t=>({...t,name:e.target.value})),required:!0})]}),(0,f.jsxs)("div",{className:"grid gap-2",children:[(0,f.jsx)(aT.Label,{htmlFor:"phone",children:"Phone Number *"}),(0,f.jsx)(x.Input,{id:"phone",placeholder:"(555) 123-4567",value:s.phone_number,onChange:e=>o(t=>({...t,phone_number:e.target.value})),required:!0})]}),(0,f.jsxs)("div",{className:"grid gap-2",children:[(0,f.jsx)(aT.Label,{htmlFor:"address",children:"Property Address *"}),(0,f.jsx)(x.Input,{id:"address",placeholder:"123 Main St, City, State 12345",value:s.address,onChange:e=>o(t=>({...t,address:e.target.value})),required:!0})]}),(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,f.jsxs)("div",{className:"grid gap-2",children:[(0,f.jsx)(aT.Label,{htmlFor:"arv",children:"ARV (Optional)"}),(0,f.jsx)(x.Input,{id:"arv",type:"number",placeholder:"200000",value:s.arv,onChange:e=>o(t=>({...t,arv:e.target.value}))})]}),(0,f.jsxs)("div",{className:"grid gap-2",children:[(0,f.jsx)(aT.Label,{htmlFor:"repairs",children:"Repairs (Optional)"}),(0,f.jsx)(x.Input,{id:"repairs",type:"number",placeholder:"30000",value:s.repair_estimate,onChange:e=>o(t=>({...t,repair_estimate:e.target.value}))})]})]}),(0,f.jsxs)("div",{className:"grid gap-2",children:[(0,f.jsx)(aT.Label,{htmlFor:"notes",children:"Notes (Optional)"}),(0,f.jsx)(S,{id:"notes",placeholder:"Any additional notes about the lead...",value:s.notes,onChange:e=>o(t=>({...t,notes:e.target.value}))})]})]}),(0,f.jsxs)(aS,{children:[(0,f.jsx)(v.Button,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,f.jsx)(v.Button,{type:"submit",disabled:n,children:n?"Adding...":"Add Lead"})]})]})]})})}var aO=e.i(63209);let aR=(0,y.default)("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);var aL=(0,av.createServerReference)("4043966d6316f67246ae2f7b38dca025dbf1438dff",av.callServer,void 0,av.findSourceMapURL,"bulkImportLeads");function aA({open:e,onOpenChange:t,onImportComplete:a}){let[n,r]=(0,p.useState)(!1),[s,o]=(0,p.useState)(null),i=async e=>{let n=e.target.files?.[0];if(n){r(!0),o(null);try{let e=(await n.text()).split("\n").filter(e=>e.trim());if(0===e.length)return void o({successCount:0,failedCount:0,errors:["CSV file is empty"]});let r=e[0].split(",").map(e=>e.trim().toLowerCase()).map(e=>e.replace(/"/g,"")),s=r.findIndex(e=>"name"===e),i=r.findIndex(e=>"phone"===e||"phone_number"===e),l=r.findIndex(e=>"address"===e),d=r.findIndex(e=>"state"===e),c=r.findIndex(e=>"notes"===e),u=r.findIndex(e=>"arv"===e),m=r.findIndex(e=>"repair_estimate"===e||"repairs"===e);if(-1===s||-1===i||-1===l)return void o({successCount:0,failedCount:0,errors:["CSV must have columns: name, phone_number, address"]});let f=e.slice(1).map(e=>{let t=e.split(",").map(e=>e.trim().replace(/"/g,""));return{name:t[s]||"",phone_number:t[i]||"",address:t[l]||"",state:d>=0?t[d]||void 0:function(e){try{for(let t of e.split(",").map(e=>e.trim().toUpperCase()).reverse()){let e=t.match(/\b([A-Z]{2})\b/);if(e)return e[1]}return}catch{return}}(t[l]||""),notes:c>=0?t[c]:void 0,arv:u>=0&&Number.parseInt(t[u])||void 0,repair_estimate:m>=0&&Number.parseInt(t[m])||void 0}}),p=await aL(f);o(p),0===p.failedCount&&setTimeout(()=>{a(),t(!1),o(null)},2e3)}catch(e){o({successCount:0,failedCount:0,errors:[`Error reading file: ${e instanceof Error?e.message:"Unknown error"}`]})}finally{r(!1)}}};return(0,f.jsx)(aw,{open:e,onOpenChange:t,children:(0,f.jsxs)(aC,{className:"max-w-md",children:[(0,f.jsxs)(ak,{children:[(0,f.jsx)(aE,{children:"Import Leads from CSV"}),(0,f.jsx)(a_,{children:"Upload a CSV file with columns: name, phone_number, address, notes (optional), arv (optional), repair_estimate (optional)"})]}),s?(0,f.jsxs)("div",{className:"space-y-4",children:[s.successCount>0&&(0,f.jsxs)("div",{className:"flex gap-3 rounded-lg bg-green-500/10 p-4",children:[(0,f.jsx)(t4,{className:"h-5 w-5 text-green-500 flex-shrink-0"}),(0,f.jsx)("div",{children:(0,f.jsxs)("p",{className:"font-medium text-green-700",children:[s.successCount," leads imported successfully"]})})]}),s.failedCount>0&&(0,f.jsxs)("div",{className:"space-y-2",children:[(0,f.jsxs)("div",{className:"flex gap-3 rounded-lg bg-red-500/10 p-4",children:[(0,f.jsx)(aO.AlertCircle,{className:"h-5 w-5 text-red-500 flex-shrink-0"}),(0,f.jsx)("div",{children:(0,f.jsxs)("p",{className:"font-medium text-red-700",children:[s.failedCount," leads failed"]})})]}),(0,f.jsx)("div",{className:"max-h-40 overflow-y-auto rounded-lg bg-muted p-3 space-y-1",children:s.errors.map((e,t)=>(0,f.jsx)("p",{className:"text-xs text-muted-foreground",children:e},t))})]}),(0,f.jsx)(v.Button,{onClick:()=>{o(null),t(!1)},className:"w-full",children:"Done"})]}):(0,f.jsxs)("div",{className:"space-y-4",children:[(0,f.jsxs)("div",{className:"relative",children:[(0,f.jsx)("input",{type:"file",accept:".csv",onChange:i,disabled:n,className:"hidden",id:"csv-input"}),(0,f.jsxs)("label",{htmlFor:"csv-input",className:"flex cursor-pointer flex-col items-center justify-center gap-2 rounded-lg border-2 border-dashed border-border bg-card/50 p-8 hover:bg-card",children:[(0,f.jsx)(aR,{className:"h-8 w-8 text-muted-foreground"}),(0,f.jsx)("span",{className:"text-sm font-medium text-foreground",children:"Click to select CSV file"}),(0,f.jsx)("span",{className:"text-xs text-muted-foreground",children:"or drag and drop"})]})]}),(0,f.jsxs)("div",{className:"rounded-lg bg-muted/50 p-3 text-xs text-muted-foreground",children:[(0,f.jsx)("p",{className:"font-medium mb-2",children:"CSV Format Example:"}),(0,f.jsx)("pre",{className:"overflow-x-auto text-xs",children:"name,phone_number,address John Doe,555-123-4567,123 Main St Jane Smith,555-987-6543,456 Oak Ave"})]})]})]})})}let aP=(0,y.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),aI=(0,y.default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),aD=(0,y.default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),aB=(0,y.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),aF=(0,y.default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),a$=(0,y.default)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);function aq({initialLeads:e}){let[t,a]=(0,p.useState)(e),[n,r]=(0,p.useState)(null),[s,o]=(0,p.useState)(!1),[i,l]=(0,p.useState)(!1),d={total:t.length,contacted:t.filter(e=>"cold_lead"!==e.conversation_state).length,qualified:t.filter(e=>["qualified","offer_made","offer_accepted","contract_sent","contract_signed","closed"].includes(e.conversation_state)).length,pending:t.filter(e=>["offer_made","contract_sent"].includes(e.conversation_state)).length};(0,p.useEffect)(()=>{try{let t=new URLSearchParams(window.location.search).get("lead");if(t){let a=e.find(e=>e.id===t)||null;a&&r(a)}}catch{}},[]);let c=e=>{a(t=>t.map(t=>t.id===e.id?e:t)),n?.id===e.id&&r(e)},u=e=>{a(t=>t.filter(t=>t.id!==e)),n?.id===e&&r(null)};return(0,f.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,f.jsx)("header",{className:"border-b border-border bg-card",children:(0,f.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,f.jsxs)("div",{className:"flex items-center gap-3",children:[(0,f.jsx)("div",{className:"flex h-9 w-9 items-center justify-center rounded-lg bg-primary",children:(0,f.jsx)(aI,{className:"h-5 w-5 text-primary-foreground"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("h1",{className:"text-lg font-semibold text-foreground",children:"AI Wholesaling Agent"}),(0,f.jsx)("p",{className:"text-sm text-muted-foreground",children:"Automated SMS Lead Management"})]})]}),(0,f.jsxs)("div",{className:"flex items-center gap-2",children:[(0,f.jsx)(v.Button,{variant:"outline",asChild:!0,children:(0,f.jsxs)("a",{href:"/dashboard/settings",children:[(0,f.jsx)(aB,{className:"mr-2 h-4 w-4"}),"Settings"]})}),(0,f.jsx)(v.Button,{variant:"outline",asChild:!0,children:(0,f.jsxs)("a",{href:"/dashboard/buyers",children:[(0,f.jsx)(aD,{className:"mr-2 h-4 w-4"}),"Buyers"]})}),(0,f.jsx)(v.Button,{variant:"outline",asChild:!0,children:(0,f.jsxs)("a",{href:"/dashboard/sequences",children:[(0,f.jsx)(tQ,{className:"mr-2 h-4 w-4"}),"Sequences"]})}),(0,f.jsx)(v.Button,{variant:"outline",asChild:!0,children:(0,f.jsxs)("a",{href:"/dashboard/contracts",children:[(0,f.jsx)(t1,{className:"mr-2 h-4 w-4"}),"Contracts"]})}),(0,f.jsx)(v.Button,{variant:"outline",asChild:!0,children:(0,f.jsxs)("a",{href:"/dashboard/faq-cache",children:[(0,f.jsx)(a$,{className:"mr-2 h-4 w-4"}),"FAQ Cache"]})}),(0,f.jsxs)(v.Button,{variant:"outline",onClick:()=>l(!0),children:[(0,f.jsx)(aF,{className:"mr-2 h-4 w-4"}),"Import CSV"]}),(0,f.jsxs)(v.Button,{onClick:()=>o(!0),children:[(0,f.jsx)(aP,{className:"mr-2 h-4 w-4"}),"Add Lead"]})]})]})}),(0,f.jsx)("div",{className:"border-b border-border bg-card/50 px-6 py-4",children:(0,f.jsxs)("div",{className:"grid grid-cols-2 gap-4 md:grid-cols-4",children:[(0,f.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-card p-4",children:[(0,f.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-muted",children:(0,f.jsx)(aD,{className:"h-5 w-5 text-muted-foreground"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-2xl font-semibold text-foreground",children:d.total}),(0,f.jsx)("p",{className:"text-sm text-muted-foreground",children:"Total Leads"})]})]}),(0,f.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-card p-4",children:[(0,f.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary/10",children:(0,f.jsx)(aI,{className:"h-5 w-5 text-primary"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-2xl font-semibold text-foreground",children:d.contacted}),(0,f.jsx)("p",{className:"text-sm text-muted-foreground",children:"Contacted"})]})]}),(0,f.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-card p-4",children:[(0,f.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-green-500/10",children:(0,f.jsx)(t8,{className:"h-5 w-5 text-green-500"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-2xl font-semibold text-foreground",children:d.qualified}),(0,f.jsx)("p",{className:"text-sm text-muted-foreground",children:"Qualified"})]})]}),(0,f.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border border-border bg-card p-4",children:[(0,f.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-amber-500/10",children:(0,f.jsx)(tQ,{className:"h-5 w-5 text-amber-500"})}),(0,f.jsxs)("div",{children:[(0,f.jsx)("p",{className:"text-2xl font-semibold text-foreground",children:d.pending}),(0,f.jsx)("p",{className:"text-sm text-muted-foreground",children:"Pending Response"})]})]})]})}),(0,f.jsxs)("div",{className:"flex h-[calc(100vh-200px)]",children:[(0,f.jsx)("div",{className:"w-full border-r border-border md:w-96",children:(0,f.jsx)(k,{leads:t,selectedLead:n,onSelectLead:e=>{r(e);try{let t=new URL(window.location.href);t.searchParams.set("lead",e.id),window.history.replaceState({},"",t.toString())}catch{}}})}),(0,f.jsx)("div",{className:"hidden flex-1 md:block",children:n?(0,f.jsx)(ax,{lead:n,onLeadUpdated:c,onLeadDeleted:u}):(0,f.jsx)("div",{className:"flex h-full items-center justify-center text-muted-foreground",children:(0,f.jsxs)("div",{className:"text-center",children:[(0,f.jsx)(aI,{className:"mx-auto mb-4 h-12 w-12 opacity-50"}),(0,f.jsx)("p",{children:"Select a lead to view details"})]})})})]}),(0,f.jsx)("div",{className:"md:hidden",children:n&&(0,f.jsx)("div",{className:"border-t border-border",children:(0,f.jsx)(ax,{lead:n,onLeadUpdated:c,onLeadDeleted:u})})}),(0,f.jsx)(aM,{open:s,onOpenChange:o,onLeadAdded:e=>{a(t=>[e,...t])}}),(0,f.jsx)(aA,{open:i,onOpenChange:l,onImportComplete:()=>{window.location.reload()}})]})}e.s(["DashboardClient",()=>aq],308)},62400,e=>{"use strict";var t=e.i(43476),a=e.i(67881),n=e.i(20755);function r(){async function e(){let e=(0,n.createSupabaseBrowser)();await e.auth.signOut();try{let e="https:"===window.location.protocol?"; Secure":"";document.cookie=`sb-access-token=; Path=/; Max-Age=0; SameSite=Lax${e}`,document.cookie=`sb-refresh-token=; Path=/; Max-Age=0; SameSite=Lax${e}`}catch{}window.location.href="/login"}return(0,t.jsx)("div",{className:"fixed top-2 right-2",children:(0,t.jsx)(a.Button,{variant:"outline",onClick:e,children:"Sign out"})})}e.s(["default",()=>r])}]);